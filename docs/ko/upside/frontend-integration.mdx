---
title: í”„ë¡ íŠ¸ì—”ë“œ í†µí•©
description: 'ê²Œì„ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ í”Œë ˆì´ì–´ ì¸ì¦, ì”ì•¡ ë° UI ì»¨íŠ¸ë¡¤ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ ParentProviderë¥¼ ì„¤ì •í•˜ê³  í›…ì„ ì‚¬ìš©í•˜ì„¸ìš”.'
lang: ko
originalPath: upside/frontend-integration.mdx
---
## ParentProvider

`ParentProvider` ì»´í¬ë„ŒíŠ¸ëŠ” ê²Œì„ í”„ë¡ íŠ¸ì—”ë“œë¥¼ Upside í”Œë«í¼ì— ì—°ê²°í•˜ê³  ì¸ì¦ì„ ì œê³µí•©ë‹ˆë‹¤.

```javascript
import { ParentProvider, useParent, useBalance, useToken, useAuthenticatedFetch } from "@b3dotfun/upside-sdk";

export default function CoinFlipGame() {
  return (
    <ParentProvider>
      <GameContent />
    </ParentProvider>
  );
}

function GameContent() {
  const { token, balance, showWinModal, showLossModal, refetchBalance } = useParent();

  // ë˜ëŠ” ê°œë³„ í›…ì„ ì‚¬ìš©í•˜ì„¸ìš”:
  const balance = useBalance(); // number | null
  const token = useToken(); // string | null
  const authFetch = useAuthenticatedFetch(); // Authorization í—¤ë”ê°€ í¬í•¨ëœ fetch

  return (
    <div>
      <h1>Coin Flip</h1>
      <p>ì”ì•¡: {(balance / 1e18).toFixed(2)} WIN</p>
      <button onClick={() => playGame(token)}>í”Œë ˆì´</button>
    </div>
  );
}
```

## ì‚¬ìš© ê°€ëŠ¥í•œ í›…

### useParent()

ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì ‘ê·¼ (token, balance, showWinModal, showLossModal ë“±)

**ë°˜í™˜ ê°’:**

- `token` (string | null): ë°±ì—”ë“œ í˜¸ì¶œì„ ìœ„í•œ JWT ì¸ì¦ í† í°
- `balance` (number | null): í˜„ì¬ WIN í† í° ì”ì•¡(wei ë‹¨ìœ„)
- `showWinModal(wins: string)`: ìŠ¹ë¦¬ ëª¨ë‹¬ í‘œì‹œ
- `showLossModal(loss: string)`: íŒ¨ë°° ëª¨ë‹¬ í‘œì‹œ
- `showToast(options)`: í† ìŠ¤íŠ¸ ì•Œë¦¼ í‘œì‹œ
- `showCustomModal(content)`: ì»¤ìŠ¤í…€ ëª¨ë‹¬ í‘œì‹œ
- `refetchBalance()`: í”Œë«í¼ì—ì„œ ì”ì•¡ ìƒˆë¡œê³ ì¹¨ ìš”ì²­

### useBalance()

í”Œë ˆì´ì–´ ì”ì•¡ ê°€ì ¸ì˜¤ê¸° (number | null)

```javascript
const balance = useBalance();
```

### useToken()

ì¸ì¦ í† í° ê°€ì ¸ì˜¤ê¸° (string | null)

```javascript
const token = useToken();
```

### useRefetchBalance()

ì”ì•¡ ìƒˆë¡œê³ ì¹¨ ìš”ì²­ í•¨ìˆ˜

```javascript
const refetchBalance = useRefetchBalance();
```

### useCustomModal()

ì»¤ìŠ¤í…€ ëª¨ë‹¬ í‘œì‹œ í•¨ìˆ˜

```javascript
const showCustomModal = useCustomModal();
```

### useAuthenticatedFetch()

Bearer í† í° í—¤ë”ê°€ ìë™ìœ¼ë¡œ í¬í•¨ëœ Fetch í•¨ìˆ˜

```javascript
const authFetch = useAuthenticatedFetch();
```

## API í˜¸ì¶œí•˜ê¸°

ì¸ì¦ëœ ìš”ì²­ì„ ë§Œë“¤ê¸° ìœ„í•´ `useAuthenticatedFetch()` í›…ì„ ì‚¬ìš©í•˜ì„¸ìš”:

```javascript
import { useAuthenticatedFetch, useBalance, useToken } from "@b3dotfun/upside-sdk";

function GameComponent() {
  const authFetch = useAuthenticatedFetch();
  const balance = useBalance();
  const token = useToken();

  const playGame = async prediction => {
    // Authorization í—¤ë”ê°€ ìë™ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤
    const response = await authFetch("/api/game/coin-flip", {
      method: "POST",
      body: JSON.stringify({
        playerId: "player-id",
        prediction,
        betAmount: "1000000000000000000", // 1 WIN in wei
      }),
    });

    const data = await response.json();
    return data;
  };

  return (
    <div>
      <p>ì”ì•¡: {(balance / 1e18).toFixed(2)} WIN</p>
      <button onClick={() => playGame("heads")}>ì•ë©´ ì˜ˆì¸¡</button>
    </div>
  );
}
```

**useAuthenticatedFetch() ì‘ë™ ë°©ì‹:**

- ìë™ìœ¼ë¡œ `Authorization: Bearer {token}` í—¤ë” í¬í•¨
- ê¸°ë³¸ì ìœ¼ë¡œ `Content-Type: application/json` ì„¤ì •
- ì œê³µí•˜ëŠ” ì¶”ê°€ í—¤ë”ë¥¼ ë³‘í•©
- `useToken()`ì—ì„œ ìë™ìœ¼ë¡œ í† í° ì²˜ë¦¬

## í”„ë¡ íŠ¸ì—”ë“œ ì˜ˆì œ

```javascript
import { ParentProvider, useParentContext } from "@b3dotfun/upside-sdk";

export default function CoinFlipGame() {
  return (
    <ParentProvider>
      <CoinFlipContent />
    </ParentProvider>
  );
}

function CoinFlipContent() {
  const { token, balance, playerId } = useParentContext();
  const [gameState, setGameState] = useState("ready"); // ready, playing, won, lost
  const [prediction, setPrediction] = useState(null);
  const [result, setResult] = useState(null);
  const [earnings, setEarnings] = useState(0);

  const playGame = async playerPrediction => {
    setPrediction(playerPrediction);
    setGameState("playing");

    try {
      // ë°±ì—”ë“œ í˜¸ì¶œ
      const response = await fetch("/api/game/coin-flip", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          Authorization: `Bearer ${token}`,
        },
        body: JSON.stringify({
          playerId,
          prediction: playerPrediction,
          betAmount: "100000000000000000", // 1 token in wei
        }),
      });

      const data = await response.json();

      if (data.outcome === "win") {
        setGameState("won");
        setEarnings(data.payout);
      } else {
        setGameState("lost");
        setEarnings(0);
      }

      setResult(data.result);
    } catch (error) {
      console.error("ê²Œì„ ì˜¤ë¥˜:", error);
      setGameState("error");
    }
  };

  return (
    <div style={{ textAlign: "center", padding: "40px" }}>
      <h1>Coin Flip</h1>
      <p>ì”ì•¡: {(balance / 1e18).toFixed(2)} WIN</p>

      {gameState === "ready" && (
        <div>
          <button onClick={() => playGame("heads")}>ì•ë©´ ì˜ˆì¸¡</button>
          <button onClick={() => playGame("tails")}>ë’·ë©´ ì˜ˆì¸¡</button>
        </div>
      )}

      {gameState === "playing" && <p>í”Œë¦½ ì¤‘...</p>}

      {gameState === "won" && (
        <div>
          <p>ğŸ‰ ìŠ¹ë¦¬í–ˆìŠµë‹ˆë‹¤! ë™ì „ì€ {result}ì— ì°©ì§€í–ˆìŠµë‹ˆë‹¤</p>
          <p>+{(earnings / 1e18).toFixed(2)} WIN</p>
        </div>
      )}

      {gameState === "lost" && (
        <div>
          <p>âŒ íŒ¨ë°°í–ˆìŠµë‹ˆë‹¤! ë™ì „ì€ {result}ì— ì°©ì§€í–ˆìŠµë‹ˆë‹¤</p>
          <p>ë‹¤ìŒ ë²ˆì— ë” ì¢‹ì€ ìš´ì„</p>
        </div>
      )}

      {gameState !== "ready" && <button onClick={() => setGameState("ready")}>ë‹¤ì‹œ í”Œë ˆì´</button>}
    </div>
  );
}
```
