---
title: í…ŒìŠ¤íŒ… & ì˜ˆì‹œ
description: 'ê²Œì„ í†µí•©ì„ ë¡œì»¬ì—ì„œ í…ŒìŠ¤íŠ¸í•˜ê³ , ì™„ì „í•œ ì˜ˆì œë¥¼ ê²€í† í•˜ë©°, ì¼ë°˜ì ì¸ ë¬¸ì œë¥¼ í•´ê²°í•˜ì„¸ìš”.'
lang: ko
originalPath: upside/testing-and-examples.mdx
---
## ë¡œì»¬í˜¸ìŠ¤íŠ¸ì—ì„œ í…ŒìŠ¤íŠ¸í•˜ê¸°

### ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ ì„¤ì •

ë°°í¬í•˜ì§€ ì•Šê³ ë„ Upside.win í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ì§ì ‘ ë¡œì»¬í˜¸ìŠ¤íŠ¸ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ê²Œì„ì„ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ì‘ë™ ë°©ì‹:**

1. `http://localhost:3000` (ë˜ëŠ” ë‹¤ë¥¸ í¬íŠ¸)ì—ì„œ ê²Œì„ ë°±ì—”ë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
2. ë¡œì»¬í˜¸ìŠ¤íŠ¸ URLì„ Base64ë¡œ ì¸ì½”ë”©í•©ë‹ˆë‹¤.
3. Upside.winì˜ í…ŒìŠ¤íŠ¸ URLë¡œ ì´ë™í•©ë‹ˆë‹¤.

### ë‹¨ê³„ë³„ ì•ˆë‚´

**1ë‹¨ê³„: ê²Œì„ ë°±ì—”ë“œ ì‹œì‘í•˜ê¸°**

```bash
npm run dev
# ê²Œì„ì´ http://localhost:3000ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.
```

**2ë‹¨ê³„: URLì„ Base64ë¡œ ì¸ì½”ë”©í•˜ê¸°**

Node.js ì‚¬ìš©:

```javascript
const url = "http://localhost:3000";
const encoded = Buffer.from(url).toString("base64");
console.log(encoded); // aHR0cDovL2xvY2FsaG9zdDozMDAw
```

ëª…ë ¹ì¤„ ì‚¬ìš©:

```bash
echo -n "http://localhost:3000" | base64
# aHR0cDovL2xvY2FsaG9zdDozMDAw
```

ì˜¨ë¼ì¸: https://www.base64encode.org/ ì—ì„œ ì•„ë¬´ base64 ì¸ì½”ë”ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.

**3ë‹¨ê³„: Upside.winì—ì„œ í…ŒìŠ¤íŠ¸í•˜ê¸°**

í…ŒìŠ¤íŠ¸ URL ë°©ë¬¸:

```
https://upside.win/test/games/aHR0cDovL2xvY2FsaG9zdDozMDAw
```

`aHR0cDovL2xvY2FsaG9zdDozMDAw`ì„ ì¸ì½”ë”©ëœ URLë¡œ êµì²´í•˜ì„¸ìš”.

### ì˜ˆì‹œ

ë‹¤ë¥¸ ë¡œì»¬í˜¸ìŠ¤íŠ¸ URLë“¤:

| URL                     | Base64                         | í…ŒìŠ¤íŠ¸ ë§í¬                                                    |
| ----------------------- | ------------------------------ | ------------------------------------------------------------ |
| `http://localhost:3000` | `aHR0cDovL2xvY2FsaG9zdDozMDAw` | `https://upside.win/test/games/aHR0cDovL2xvY2FsaG9zdDozMDAw` |
| `http://localhost:5000` | `aHR0cDovL2xvY2FsaG9zdDo1MDOw` | `https://upside.win/test/games/aHR0cDovL2xvY2FsaG9zdDo1MDOw` |
| `http://127.0.0.1:3000` | `aHR0cDovLzEyNy4wLjAuMTozMDAw` | `https://upside.win/test/games/aHR0cDovLzEyNy4wLjAuMTozMDAw` |

### ê°œë°œ ì›Œí¬í”Œë¡œìš°

1. **ê²Œì„ ì½”ë“œ ìƒì„±** - React í”„ë¡ íŠ¸ì—”ë“œì™€ Cloudflare Hono ë°±ì—”ë“œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.
2. **ë¡œì»¬ì—ì„œ ì‹œì‘** - ë¡œì»¬í˜¸ìŠ¤íŠ¸ì—ì„œ `npm run dev`ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
3. **í…ŒìŠ¤íŠ¸ URL ìƒì„±** - ë¡œì»¬í˜¸ìŠ¤íŠ¸ ì£¼ì†Œë¥¼ Base64ë¡œ ì¸ì½”ë”©í•©ë‹ˆë‹¤.
4. **Upsideì—ì„œ í…ŒìŠ¤íŠ¸** - `https://upside.win/test/games/<BASE64>`ë¥¼ ë°©ë¬¸í•©ë‹ˆë‹¤.
5. **JWT ë°›ê³  í…ŒìŠ¤íŠ¸** - ê²Œì„ì´ ì‹¤ì œ JWTë¡œ ë¡œë”©ë˜ì–´ í…ŒìŠ¤íŠ¸ë©ë‹ˆë‹¤.
6. **ë°˜ë³µ** - ë¡œì»¬ì—ì„œ ë³€ê²½ì‚¬í•­ì„ ë§Œë“¤ê³  í…ŒìŠ¤íŠ¸ URLì„ ìƒˆë¡œê³ ì¹¨í•©ë‹ˆë‹¤.
7. **ë°°í¬** - ì¤€ë¹„ê°€ ë˜ë©´ ë°±ì—”ë“œë¥¼ ë°°í¬í•˜ê³  ê²Œì„ URLì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

### ë¡œì»¬ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ íŒ

- **ë™ì¼í•œ ê¸°ê¸° ì‚¬ìš©**: í…ŒìŠ¤íŠ¸í•˜ëŠ” ë™ì•ˆ ë¡œì»¬í˜¸ìŠ¤íŠ¸ë¥¼ ê³„ì† ì‹¤í–‰í•˜ì„¸ìš”.
- **CORS í™•ì¸**: ë°±ì—”ë“œê°€ upside.win ë„ë©”ì¸ì—ì„œì˜ ìš”ì²­ì„ í—ˆìš©í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.

### ë¡œì»¬ í…ŒìŠ¤íŠ¸ ë¬¸ì œ í•´ê²°

**ë¬¸ì œ**: "ê²Œì„ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ" ë˜ëŠ” 404

- **í•´ê²°ì±…**: ë¡œì»¬í˜¸ìŠ¤íŠ¸ URLì´ ì •í™•í•˜ê³  ì¸ì½”ë”©ì´ ì •í™•í•œì§€ í™•ì¸í•˜ì„¸ìš”.

**ë¬¸ì œ**: CORS ì˜¤ë¥˜

- **í•´ê²°ì±…**: ë°±ì—”ë“œê°€ upside.win ë„ë©”ì¸ì—ì„œì˜ ìš”ì²­ì„ í—ˆìš©í•´ì•¼ í•©ë‹ˆë‹¤.

**ë¬¸ì œ**: í…ŒìŠ¤íŠ¸ ì¤‘ JWT ì˜¤ë¥˜

- **í•´ê²°ì±…**: í”„ë¡œë•ì…˜ API í‚¤ê°€ ì•„ë‹Œ ìŠ¤í…Œì´ì§• API í‚¤ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.

**ë¬¸ì œ**: ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ì‹¤íŒ¨

- **í•´ê²°ì±…**: ë¡œì»¬í˜¸ìŠ¤íŠ¸ê°€ ì‹¤í–‰ ì¤‘ì´ê³  ë°©í™”ë²½ì´ ìš”ì²­ì„ í—ˆìš©í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.

## ì™„ì „í•œ ì˜ˆì‹œ: ë™ì „ ë˜ì§€ê¸° ê²Œì„

### í”„ë¡ íŠ¸ì—”ë“œ (React)

```javascript
import { ParentProvider, useParentContext } from "@b3dotfun/upside-sdk";

export default function CoinFlipGame() {
  return (
    <ParentProvider>
      <CoinFlipContent />
    </ParentProvider>
  );
}

function CoinFlipContent() {
  const { token, balance, playerId } = useParentContext();
  const [gameState, setGameState] = useState("ready"); // ready, playing, won, lost
  const [prediction, setPrediction] = useState(null);
  const [result, setResult] = useState(null);
  const [earnings, setEarnings] = useState(0);

  const playGame = async playerPrediction => {
    setPrediction(playerPrediction);
    setGameState("playing");

    try {
      // ë°±ì—”ë“œ í˜¸ì¶œ
      const response = await fetch("/api/game/coin-flip", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          Authorization: `Bearer ${token}`,
        },
        body: JSON.stringify({
          playerId,
          prediction: playerPrediction,
          betAmount: "100000000000000000", // 1 í† í° in wei
        }),
      });

      const data = await response.json();

      if (data.outcome === "win") {
        setGameState("won");
        setEarnings(data.payout);
      } else {
        setGameState("lost");
        setEarnings(0);
      }

      setResult(data.result);
    } catch (error) {
      console.error("ê²Œì„ ì˜¤ë¥˜:", error);
      setGameState("error");
    }
  };

  return (
    <div style={{ textAlign: "center", padding: "40px" }}>
      <h1>ë™ì „ ë˜ì§€ê¸°</h1>
      <p>ì”ì•¡: {(balance / 1e18).toFixed(2)} WIN</p>

      {gameState === "ready" && (
        <div>
          <button onClick={() => playGame("heads")}>ì•ë©´ ì˜ˆì¸¡</button>
          <button onClick={() => playGame("tails")}>ë’·ë©´ ì˜ˆì¸¡</button>
        </div>
      )}

      {gameState === "playing" && <p>ë˜ì§€ëŠ” ì¤‘...</p>}

      {gameState === "won" && (
        <div>
          <p>ğŸ‰ ì´ê²¼ìŠµë‹ˆë‹¤! ë™ì „ì€ {result}ì— ì°©ì§€í–ˆìŠµë‹ˆë‹¤</p>
          <p>+{(earnings / 1e18).toFixed(2)} WIN</p>
        </div>
      )}

      {gameState === "lost" && (
        <div>
          <p>âŒ ì¡ŒìŠµë‹ˆë‹¤! ë™ì „ì€ {result}ì— ì°©ì§€í–ˆìŠµë‹ˆë‹¤</p>
          <p>ë‹¤ìŒ ë²ˆì— í–‰ìš´ì„ ë¹•ë‹ˆë‹¤</p>
        </div>
      )}

      {gameState !== "ready" && <button onClick={() => setGameState("ready")}>ë‹¤ì‹œ í”Œë ˆì´</button>}
    </div>
  );
}
```

### ë°±ì—”ë“œ (Hono + Cloudflare Workers)

```javascript
import { Hono } from "hono";
import { createB3Client } from "@b3dotfun/upside-sdk/server";

const app = new Hono();

app.post("/api/game/coin-flip", async c => {
  const { prediction, betAmount } = await c.req.json();

  try {
    // Hono ì»¨í…ìŠ¤íŠ¸ì—ì„œ B3Client ìƒì„±
    // Authorization í—¤ë”ì—ì„œ ìë™ìœ¼ë¡œ ì¸ì¦ í† í° ì¶”ì¶œ
    const b3Client = createB3Client(c);

    // 1ë‹¨ê³„: ë² íŒ…í•˜ê¸° (ê¸ˆì•¡ in wei)
    const betResult = await b3Client.placeBet("coin-flip", betAmount);

    if (!betResult.sessionId) {
      return c.json({ error: "ë² íŒ… ì‹¤íŒ¨" }, 400);
    }

    // 2ë‹¨ê³„: ê²Œì„ ë¡œì§ - ë™ì „ ë˜ì§€ê¸°
    const coin = Math.random() < 0.5 ? "heads" : "tails";
    const isWin = coin === prediction;
    // ì§€ë¶ˆê¸ˆ ê³„ì‚°: ìŠ¹ë¦¬ ì‹œ 50% ì´ìµ (betAmount * 1.5, in wei)
    const payout = isWin ? (BigInt(betAmount) * BigInt(150)) / BigInt(100) : "0";

    // 3ë‹¨ê³„: ë°ì´í„°ë² ì´ìŠ¤ì— ê²Œì„ ì €ì¥ (D1 ë“±)
    // await db.execute(
    //   "INSERT INTO games (sessionId, prediction, result, betAmount, payout) VALUES (?, ?, ?, ?, ?)",
    //   [betResult.sessionId, prediction, coin, betAmount, payout.toString()]
    // );

    // 4ë‹¨ê³„: ì§€ë¶ˆê¸ˆ ì²˜ë¦¬
    const payoutResult = await b3Client.processPayout("coin-flip", betResult.sessionId, payout.toString(), {
      playerChoice: prediction,
      result: coin,
      outcome: isWin ? "win" : "loss",
    });

    // 5ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œì— ê²°ê³¼ ë°˜í™˜
    return c.json({
      sessionId: betResult.sessionId,
      prediction,
      result: coin,
      outcome: isWin ? "win" : "loss",
      payout: isWin ? payout.toString() : "0",
      newBalance: payoutResult.newBalance,
    });
  } catch (error) {
    console.error("ê²Œì„ ì˜¤ë¥˜:", error);
    return c.json({ error: error.message }, 500);
  }
});

export default app;
```

## ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œ

**ë¬¸ì œ**: `placeBet`ì´ "ì”ì•¡ ë¶€ì¡±"ìœ¼ë¡œ ì‹¤íŒ¨í•¨

- **í•´ê²°ì±…**: ë² íŒ…ì„ í•˜ê¸° ì „ì— í”Œë ˆì´ì–´ ì”ì•¡ì„ í™•ì¸í•˜ê±°ë‚˜ UIì—ì„œ ë² íŒ… ê¸ˆì•¡ì„ ì¦ê°€ì‹œí‚¤ì„¸ìš”.

**ë¬¸ì œ**: `processPayout`ì´ "ì„¸ì…˜ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ"ì„ ë°˜í™˜í•¨

- **í•´ê²°ì±…**: sessionIdê°€ ë² íŒ… ì‘ë‹µê³¼ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•˜ê³  ì˜¤íƒ€ë¥¼ í™•ì¸í•˜ì„¸ìš”.

**ë¬¸ì œ**: ì¤‘ë³µëœ ê²Œì„ ì„¸ì…˜ ë˜ëŠ” ë² íŒ…

- **í•´ê²°ì±…**: ì¬ì‹œë„ì— ë™ì¼í•œ sessionIdë¥¼ ì‚¬ìš©í•˜ê³ , ì„œë²„ ì¸¡ì—ì„œ ë©±ë“±ì„±ì„ êµ¬í˜„í•˜ì„¸ìš”.

**ë¬¸ì œ**: ê²Œì„ í”Œë ˆì´ ì¤‘ JWT ë§Œë£Œ

- **í•´ê²°ì±…**: ê²Œì„ ì‹œì‘ ì „ì— í† í°ì„ ìƒˆë¡œ ê³ ì¹˜ê³ , í† í° ë§Œë£Œë¥¼ ìš°ì•„í•˜ê²Œ ì²˜ë¦¬í•˜ì„¸ìš”.

**ë¬¸ì œ**: ê²Œì„ ë¡œì§ì´ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‹¤í–‰ë˜ì–´ ë¶€ì • í–‰ìœ„ ë°œìƒ

- **í•´ê²°ì±…**: ëª¨ë“  ê²Œì„ ë¡œì§ì„ ë°±ì—”ë“œë¡œ ì´ë™ì‹œí‚¤ê³ , í´ë¼ì´ì–¸íŠ¸ëŠ” ê²°ê³¼ë§Œ í‘œì‹œí•˜ì„¸ìš”.
