---
title: Hooks
description: React hooksë¥¼ ì‚¬ìš©í•˜ì—¬ ë§ì¶¤ ê²°ì œ íë¦„ì„ êµ¬ì¶•í•˜ê³  ì£¼ë¬¸ ìˆ˜ëª… ì£¼ê¸°ë¥¼ ê´€ë¦¬í•˜ê¸°
lang: ko
originalPath: anyspend/hooks.mdx
---
## í•µì‹¬ í›…

### `useAnyspendQuote`

í† í° ìŠ¤ì™‘ ë° í¬ë¡œìŠ¤ ì²´ì¸ ê±°ë˜ì— ëŒ€í•œ ì‹¤ì‹œê°„ ê°€ê²© ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.

```tsx title="ê¸°ë³¸ ì‚¬ìš©ë²•" icon="quote-left"
import { useAnyspendQuote } from "@b3dotfun/sdk/anyspend";

const {
  anyspendQuote,
  isLoadingAnyspendQuote,
  getAnyspendQuoteError,
  refetchAnyspendQuote
} = useAnyspendQuote(quoteRequest);
```

#### ë§¤ê°œë³€ìˆ˜

<ParamField path="quoteRequest" type="QuoteRequest" required>
  ê²¬ì  êµ¬ì„± ê°ì²´
</ParamField>

#### QuoteRequest ì¸í„°í˜ì´ìŠ¤

```typescript title="íƒ€ì… ì •ì˜" icon="code"
interface QuoteRequest {
  srcChain: number;              // ì¶œë°œ ì²´ì¸ ID
  dstChain: number;              // ë„ì°© ì²´ì¸ ID
  srcTokenAddress: string;       // ì¶œë°œ í† í° ê³„ì•½ ì£¼ì†Œ
  dstTokenAddress: string;       // ë„ì°© í† í° ê³„ì•½ ì£¼ì†Œ
  type: "swap" | "custom";       // ì£¼ë¬¸ ìœ í˜•
  tradeType: "EXACT_INPUT" | "EXACT_OUTPUT";
  amount: string;                // ìµœì†Œ ë‹¨ìœ„(wei)ë¡œì˜ ê¸ˆì•¡
}
```

#### ë°˜í™˜ ê°’

<ResponseField name="anyspendQuote" type="QuoteResponse | null">
  ê°€ê²© ë° ìˆ˜ìˆ˜ë£Œê°€ í¬í•¨ëœ ê²¬ì  ë°ì´í„°
</ResponseField>

<ResponseField name="isLoadingAnyspendQuote" type="boolean">
  ë¡œë”© ìƒíƒœ ì§€ì‹œê¸°
</ResponseField>

<ResponseField name="getAnyspendQuoteError" type="Error | null">
  ê²¬ì  ì‹¤íŒ¨ ì‹œ ì˜¤ë¥˜ ê°ì²´
</ResponseField>

<ResponseField name="refetchAnyspendQuote" type="() => void">
  ê²¬ì ì„ ìˆ˜ë™ìœ¼ë¡œ ìƒˆë¡œê³ ì¹¨í•˜ëŠ” í•¨ìˆ˜
</ResponseField>

#### ì‚¬ìš© ì˜ˆì‹œ

```tsx title="ìŠ¤ì™‘ ê²¬ì  ì»´í¬ë„ŒíŠ¸" icon="exchange-alt" lines
function SwapQuote() {
  const quoteRequest = {
    srcChain: 1,           // ì´ë”ë¦¬ì›€
    dstChain: 8333,        // B3
    srcTokenAddress: "0xA0b86a33E6Fb6Dd9a9B3d8B5FEb2b3C8e7D9Ff1E", // USDC
    dstTokenAddress: "0x0000000000000000000000000000000000000000", // ETH
    type: "swap",
    tradeType: "EXACT_INPUT",
    amount: "1000000", // 1 USDC (6 decimals)
  };

  const { anyspendQuote, isLoadingAnyspendQuote, getAnyspendQuoteError } =
    useAnyspendQuote(quoteRequest);

  if (isLoadingAnyspendQuote) return <div>ìµœì ì˜ ê°€ê²©ì„ ì°¾ëŠ” ì¤‘...</div>;
  if (getAnyspendQuoteError) return <div>ê²¬ì ì„ ê°€ì ¸ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤</div>;

  return (
    <div>
      <p>ë°›ì„ ê¸ˆì•¡: {anyspendQuote?.expectedOutput} ETH</p>
      <p>ë„¤íŠ¸ì›Œí¬ ìˆ˜ìˆ˜ë£Œ: ${anyspendQuote?.networkFeeUsd}</p>
      <p>ì„œë¹„ìŠ¤ ìˆ˜ìˆ˜ë£Œ: ${anyspendQuote?.serviceFeeUsd}</p>
      <p>ì´ ë¹„ìš©: ${anyspendQuote?.totalUsdCost}</p>
    </div>
  );
}
```

---

### `useAnyspendCreateOrder`

ì¢…í•©ì ì¸ ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ í¬í•¨í•˜ì—¬ AnySpend ì£¼ë¬¸ì„ ìƒì„±í•˜ê³  ì‹¤í–‰í•©ë‹ˆë‹¤.

```tsx title="ê¸°ë³¸ ì‚¬ìš©ë²•" icon="plus-circle"
import { useAnyspendCreateOrder } from "@b3dotfun/sdk/anyspend";

const {
  createOrder,
  isCreatingOrder,
  createOrderError
} = useAnyspendCreateOrder(options);
```

#### ë§¤ê°œë³€ìˆ˜

<ParamField path="options" type="CreateOrderOptions">
  ì½œë°± í•¨ìˆ˜ê°€ í¬í•¨ëœ êµ¬ì„± ê°ì²´
</ParamField>

#### CreateOrderOptions ì¸í„°í˜ì´ìŠ¤

```typescript title="íƒ€ì… ì •ì˜" icon="settings"
interface CreateOrderOptions {
  onSuccess?: (data: OrderResponse) => void;
  onError?: (error: Error) => void;
  onSettled?: () => void;
}
```

#### ë°˜í™˜ ê°’

<ResponseField name="createOrder" type="(request: CreateOrderRequest) => void">
  ì£¼ë¬¸ì„ ìƒì„±í•˜ê³  ì‹¤í–‰í•˜ëŠ” í•¨ìˆ˜
</ResponseField>

<ResponseField name="isCreatingOrder" type="boolean">
  ë¡œë”© ìƒíƒœ ì§€ì‹œê¸°
</ResponseField>

<ResponseField name="createOrderError" type="Error | null">
  ì£¼ë¬¸ ìƒì„± ì‹¤íŒ¨ ì‹œ ì˜¤ë¥˜ ê°ì²´
</ResponseField>

#### ì‚¬ìš© ì˜ˆì‹œ

```tsx title="ê²°ì œ í¼" icon="credit-card" lines
function PaymentForm() {
  const { createOrder, isCreatingOrder } = useAnyspendCreateOrder({
    onSuccess: (data) => {
      console.log("ì£¼ë¬¸ ìƒì„±ë¨:", data.data.id);
      // ê²°ì œë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸í•˜ê±°ë‚˜ ì„±ê³µ í‘œì‹œ
      router.push(`/payment/${data.data.id}`);
    },
    onError: (error) => {
      console.error("ì£¼ë¬¸ ì‹¤íŒ¨:", error.message);
      toast.error("ê²°ì œ ì‹¤íŒ¨. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
    },
  });

  const handlePayment = () => {
    createOrder({
      recipientAddress: userWalletAddress,
      orderType: "swap",
      srcChain: 1,
      dstChain: 8333,
      srcToken: {
        chainId: 1,
        address: "0xA0b86a33E6Fb6Dd9a9B3d8B5FEb2b3C8e7D9Ff1E",
        name: "USD Coin",
        symbol: "USDC",
        decimals: 6,
      },
      dstToken: {
        chainId: 8333,
        address: "0x0000000000000000000000000000000000000000",
        name: "Ether",
        symbol: "ETH",
        decimals: 18,
      },
      srcAmount: "1000000", // 1 USDC
      expectedDstAmount: "500000000000000000", // ~0.5 ETH
      creatorAddress: userWalletAddress,
    });
  };

  return (
    <button
      onClick={handlePayment}
      disabled={isCreatingOrder}
    >
      {isCreatingOrder ? "ì²˜ë¦¬ ì¤‘..." : "ì•”í˜¸í™”íë¡œ ê²°ì œí•˜ê¸°"}
    </button>
  );
}
```

---

### `useAnyspendOrderAndTransactions`

ì‹¤ì‹œê°„ìœ¼ë¡œ ì£¼ë¬¸ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³  ê´€ë ¨ ë¸”ë¡ì²´ì¸ ê±°ë˜ë¥¼ ì¶”ì í•©ë‹ˆë‹¤.

```tsx title="ê¸°ë³¸ ì‚¬ìš©ë²•" icon="search"
import { useAnyspendOrderAndTransactions } from "@b3dotfun/sdk/anyspend";

const {
  orderAndTransactions,
  isLoadingOrderAndTransactions,
  getOrderAndTransactionsError
} = useAnyspendOrderAndTransactions(orderId);
```

#### ë§¤ê°œë³€ìˆ˜

<ParamField path="orderId" type="string" required>
  ì¶”ì  ë° ëª¨ë‹ˆí„°ë§í•  ì£¼ë¬¸ ID
</ParamField>

#### ë°˜í™˜ ê°’

<ResponseField name="orderAndTransactions" type="OrderWithTransactions | null">
  ê±°ë˜ ì„¸ë¶€ ì •ë³´ê°€ í¬í•¨ëœ ì™„ì „í•œ ì£¼ë¬¸ ë°ì´í„°
</ResponseField>

<ResponseField name="isLoadingOrderAndTransactions" type="boolean">
  ë¡œë”© ìƒíƒœ ì§€ì‹œê¸°
</ResponseField>

<ResponseField name="getOrderAndTransactionsError" type="Error | null">
  ì¡°íšŒ ì‹¤íŒ¨ ì‹œ ì˜¤ë¥˜ ê°ì²´
</ResponseField>

#### OrderWithTransactions ì¸í„°í˜ì´ìŠ¤

```typescript title="íƒ€ì… ì •ì˜" icon="database"
interface OrderWithTransactions {
  data: {
    order: Order;               // ì£¼ë¬¸ ì„¸ë¶€ ì •ë³´ ë° ìƒíƒœ
    depositTxs: Transaction[];  // ì‚¬ìš©ì ì˜ˆì¹˜ ê±°ë˜
    relayTx?: Transaction;      // í¬ë¡œìŠ¤ ì²´ì¸ ì¤‘ê³„ ê±°ë˜
    executeTx?: Transaction;    // ìµœì¢… ì‹¤í–‰ ê±°ë˜
    refundTxs: Transaction[];   // í™˜ë¶ˆ ê±°ë˜(í•´ë‹¹ë˜ëŠ” ê²½ìš°)
  };
}
```

#### ì‚¬ìš© ì˜ˆì‹œ

```tsx title="ì£¼ë¬¸ ì¶”ì ê¸°" icon="eye" lines
function OrderTracker({ orderId }: { orderId: string }) {
  const { orderAndTransactions, isLoadingOrderAndTransactions } =
    useAnyspendOrderAndTransactions(orderId);

  if (isLoadingOrderAndTransactions) {
    return <div>ì£¼ë¬¸ ìƒíƒœë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>;
  }

  if (!orderAndTransactions) {
    return <div>ì£¼ë¬¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</div>;
  }

  const { order, depositTxs, executeTx, refundTxs } = orderAndTransactions.data;

  const getStatusMessage = (status: string) => {
    switch (status) {
      case "scanning_deposit_transaction":
        return "â³ ê²°ì œ í™•ì¸ ëŒ€ê¸° ì¤‘...";
      case "relay":
        return "ğŸ”„ í¬ë¡œìŠ¤ ì²´ì¸ ê±°ë˜ ì²˜ë¦¬ ì¤‘...";
      case "executed":
        return "âœ… ê±°ë˜ê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!";
      case "refunded":
        return "â†©ï¸ í™˜ë¶ˆ ì²˜ë¦¬ë¨";
      default:
        return "ğŸ”„ ì²˜ë¦¬ ì¤‘...";
    }
  };

  return (
    <div className="order-status">
      <h2>ì£¼ë¬¸ #{orderId.slice(0, 8)}</h2>
      <p>{getStatusMessage(order.status)}</p>

      {depositTxs.length > 0 && (
        <div>
          <h3>ê²°ì œ ê±°ë˜</h3>
          <a
            href={`https://etherscan.io/tx/${depositTxs[0].txHash}`}
            target="_blank"
            rel="noopener noreferrer"
          >
            Etherscanì—ì„œ ë³´ê¸°
          </a>
        </div>
      )}

      {executeTx && (
        <div>
          <h3>ì‹¤í–‰ ê±°ë˜</h3>
          <a
            href={`https://explorer.b3.fun/tx/${executeTx.txHash}`}
            target="_blank"
            rel="noopener noreferrer"
          >
            B3 íƒìƒ‰ê¸°ì—ì„œ ë³´ê¸°
          </a>
        </div>
      )}

      {order.errorDetails && (
        <div className="error">
          <strong>ì˜¤ë¥˜:</strong> {order.errorDetails}
        </div>
      )}
    </div>
  );
}
```

---

### `useAnyspendOrderHistory`

ì‚¬ìš©ì ì£¼ì†Œì— ëŒ€í•œ í˜ì´ì§€ë„¤ì´ì…˜ëœ ì£¼ë¬¸ ê¸°ë¡ì„ ê²€ìƒ‰í•©ë‹ˆë‹¤.

```tsx title="ê¸°ë³¸ ì‚¬ìš©ë²•" icon="history"
import { useAnyspendOrderHistory } from "@b3dotfun/sdk/anyspend";

const {
  orderHistory,
  isLoadingOrderHistory,
  getOrderHistoryError
} = useAnyspendOrderHistory(creatorAddress, limit, offset);
```

#### ë§¤ê°œë³€ìˆ˜

<ParamField path="creatorAddress" type="string" required>
  ì‚¬ìš©ì ì§€ê°‘ ì£¼ì†Œ
</ParamField>

<ParamField path="limit" type="number" required>
  ê°€ì ¸ì˜¬ ì£¼ë¬¸ ìˆ˜(ìµœëŒ€ 100)
</ParamField>

<ParamField path="offset" type="number" required>
  í˜ì´ì§€ë„¤ì´ì…˜ ì˜¤í”„ì…‹
</ParamField>

#### ì‚¬ìš© ì˜ˆì‹œ

```tsx title="ì£¼ë¬¸ ê¸°ë¡ ì»´í¬ë„ŒíŠ¸" icon="list" lines
function OrderHistory({ userAddress }: { userAddress: string }) {
  const [page, setPage] = useState(0);
  const pageSize = 10;

  const { orderHistory, isLoadingOrderHistory } = useAnyspendOrderHistory(
    userAddress,
    pageSize,
    page * pageSize
  );

  if (isLoadingOrderHistory) {
    return <div>ì£¼ë¬¸ ê¸°ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>;
  }

  return (
    <div>
      <h2>ê·€í•˜ì˜ ì£¼ë¬¸</h2>
      {orderHistory?.data.map((order) => (
        <div key={order.id} className="order-item">
          <p>ìœ í˜•: {order.type}</p>
          <p>ìƒíƒœ: {order.status}</p>
          <p>ê¸ˆì•¡: {order.srcAmount} {order.srcToken.symbol}</p>
          <p>ë‚ ì§œ: {new Date(order.createdAt).toLocaleDateString()}</p>
        </div>
      ))}

      <button
        onClick={() => setPage(page - 1)}
        disabled={page === 0}
      >
        ì´ì „
      </button>
      <button
        onClick={() => setPage(page + 1)}
        disabled={!orderHistory?.data || orderHistory.data.length < pageSize}
      >
        ë‹¤ìŒ
      </button>
    </div>
  );
}
```

## ì¶”ê°€ í›…

### `useAnyspendTokens`

íŠ¹ì • ì²´ì¸ì— ëŒ€í•´ ì‚¬ìš© ê°€ëŠ¥í•œ í† í°ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.

```tsx title="í† í° ëª©ë¡" icon="coins"
const { tokens, isLoadingTokens } = useAnyspendTokens(1, "USDC");
```

### `useCoinbaseOnrampOptions`

í”¼ì•„íŠ¸ ê²°ì œë¥¼ ìœ„í•œ Coinbase ì˜¨ë¨í”„ êµ¬ì„±ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.

```tsx title="Coinbase ì˜¨ë¨í”„" icon="credit-card"
const { coinbaseOptions, isLoadingCoinbaseOptions } = useCoinbaseOnrampOptions();
```

### `useStripeClientSecret`

ì‹ ìš© ì¹´ë“œ ê²°ì œë¥¼ ìœ„í•œ Stripe ê²°ì œ ì˜ë„ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.

```tsx title="Stripe í†µí•©" icon="stripe"
const { clientSecret, isLoadingClientSecret } = useStripeClientSecret(orderData);
```

## í›… íŒ¨í„´

### ì˜¤ë¥˜ ì²˜ë¦¬ íŒ¨í„´

```tsx title="ì˜¤ë¥˜ ì²˜ë¦¬" icon="shield-exclamation" lines
function PaymentComponent() {
  const { createOrder, isCreatingOrder } = useAnyspendCreateOrder({
    onError: (error) => {
      // ë””ë²„ê¹…ì„ ìœ„í•œ ì˜¤ë¥˜ ë¡œê¹…
      console.error("ê²°ì œ ì‹¤íŒ¨:", error);

      // ì‚¬ìš©ì ì¹œí™”ì  ë©”ì‹œì§€ í‘œì‹œ
      switch (error.message) {
        case "INSUFFICIENT_BALANCE":
          toast.error("ì”ì•¡ì´ ë¶€ì¡±í•©ë‹ˆë‹¤. ìê¸ˆì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.");
          break;
        case "SLIPPAGE":
          toast.error("ê°€ê²©ì´ ë¶ˆë¦¬í•˜ê²Œ ì›€ì§ì˜€ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
          break;
        default:
          toast.error("ê²°ì œ ì‹¤íŒ¨. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
      }
    },
  });

  // ì»´í¬ë„ŒíŠ¸ êµ¬í˜„...
}
```

### ë¡œë”© ìƒíƒœ íŒ¨í„´

```tsx title="ë¡œë”© ìƒíƒœ" icon="spinner" lines
function SwapInterface() {
  const { anyspendQuote, isLoadingAnyspendQuote } = useAnyspendQuote(quoteRequest);
  const { createOrder, isCreatingOrder } = useAnyspendCreateOrder();

  const isLoading = isLoadingAnyspendQuote || isCreatingOrder;

  return (
    <div>
      {isLoading && <LoadingSpinner />}
      {/* ì»´í¬ë„ŒíŠ¸ì˜ ë‚˜ë¨¸ì§€ ë¶€ë¶„ */}
    </div>
  );
}
```

### ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ íŒ¨í„´

```tsx title="ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸" icon="sync-alt" lines
function OrderStatus({ orderId }: { orderId: string }) {
  const { orderAndTransactions } = useAnyspendOrderAndTransactions(orderId);

  // ëŒ€ê¸° ì¤‘ì¸ ì£¼ë¬¸ì— ëŒ€í•´ 5ì´ˆë§ˆë‹¤ ìë™ ìƒˆë¡œê³ ì¹¨
  useEffect(() => {
    if (orderAndTransactions?.data.order.status === "relay") {
      const interval = setInterval(() => {
        // í›…ì— ì˜í•´ ìë™ìœ¼ë¡œ ë‹¤ì‹œ ì¡°íšŒë¨
      }, 5000);

      return () => clearInterval(interval);
    }
  }, [orderAndTransactions?.data.order.status]);

  // ì»´í¬ë„ŒíŠ¸ êµ¬í˜„...
}
```

## ë‹¤ìŒ ë‹¨ê³„

<CardGroup cols={3}>
<Card title="ì˜ˆì œ ë³´ê¸°" icon="code" href="/anyspend/examples">
  ì‹¤ì œ êµ¬í˜„ ì˜ˆì œë¥¼ ì°¾ì•„ë³´ì„¸ìš”
</Card>

<Card title="ì˜¤ë¥˜ ì²˜ë¦¬" icon="bug" href="/anyspend/error-handling">
  ì¢…í•©ì ì¸ ì˜¤ë¥˜ ì²˜ë¦¬ ì „ëµì„ ë°°ìš°ì„¸ìš”
</Card>

<Card title="ì»´í¬ë„ŒíŠ¸ ì°¸ì¡°" icon="puzzle-piece" href="/anyspend/components">
  ì‚¬ì „ ì œì‘ëœ ì»´í¬ë„ŒíŠ¸ë¥¼ íƒìƒ‰í•˜ì„¸ìš”
</Card>
</CardGroup>
