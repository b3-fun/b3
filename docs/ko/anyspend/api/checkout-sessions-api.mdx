---
title: Checkout Sessions
description: 서버 측 체크아웃 세션 관리를 위한 프로그래매틱 결제 흐름
lang: ko
originalPath: anyspend/api/checkout-sessions-api.mdx
---
체크아웃 세션은 개별 결제 시도를 나타냅니다. 고객마다 고유한 체크아웃 URL을 생성하고, 결제 세부 정보를 미리 채우며, 자체 참조 ID로 전환을 추적하기 위해 서버 측에서 세션을 생성할 수 있습니다.

<Info>
  체크아웃 세션은 기본적으로 30분 후에 만료됩니다. `expires_in` 매개변수를 사용하여 만료 시간을 사용자 정의하세요(최소 5분, 최대 24시간).
</Info>

## 체크아웃 세션 객체

<ResponseField name="id" type="string">
  체크아웃 세션의 고유 식별자 (예: `cs_abc123`).
</ResponseField>

<ResponseField name="url" type="string">
  고객을 리디렉션할 체크아웃 URL.
</ResponseField>

<ResponseField name="status" type="string">
  세션의 현재 상태. `open`, `processing`, `completed`, `expired`, `failed` 중 하나.
</ResponseField>

<ResponseField name="payment_link_id" type="string | null">
  세션이 결제 링크에서 생성된 경우 연결된 결제 링크 ID.
</ResponseField>

<ResponseField name="product_id" type="string | null">
  연결된 제품 ID.
</ResponseField>

<ResponseField name="token_address" type="string">
  받을 토큰의 계약 주소.
</ResponseField>

<ResponseField name="chain_id" type="number">
  결제를 받고 싶은 체인 ID.
</ResponseField>

<ResponseField name="recipient_address" type="string">
  결제를 받는 지갑 주소.
</ResponseField>

<ResponseField name="amount" type="string">
  토큰의 최소 단위로의 결제 금액.
</ResponseField>

<ResponseField name="amount_usd" type="string | null">
  세션 생성 시점의 USD 환산액.
</ResponseField>

<ResponseField name="success_url" type="string | null">
  결제 성공 후 고객이 리디렉션되는 URL. 템플릿 변수를 지원합니다.
</ResponseField>

<ResponseField name="cancel_url" type="string | null">
  고객이 취소했을 때 리디렉션되는 URL.
</ResponseField>

<ResponseField name="client_reference_id" type="string | null">
  이 세션에 대한 귀하의 내부 참조 ID.
</ResponseField>

<ResponseField name="metadata" type="object | null">
  웹훅과 거래를 통해 전달되는 임의의 키-값 쌍.
</ResponseField>

<ResponseField name="customer_email" type="string | null">
  고객의 이메일 주소. 저장 시 암호화되며, 웹훅 페이로드에 포함됩니다.
</ResponseField>

<ResponseField name="customer_name" type="string | null">
  고객의 이름. 저장 시 암호화되며, 웹훅 페이로드에 포함됩니다.
</ResponseField>

<ResponseField name="payer_address" type="string | null">
  지불자의 지갑 주소(연결 후 채워짐).
</ResponseField>

<ResponseField name="tx_hash" type="string | null">
  체인상의 거래 해시(제출 후 채워짐).
</ResponseField>

<ResponseField name="customer_id" type="string | null">
  결제 후 채워지는 연결된 고객 ID.
</ResponseField>

<ResponseField name="form_data" type="object | null">
  고객이 제출한 사용자 정의 양식 데이터.
</ResponseField>

<ResponseField name="shipping_address" type="object | null">
  고객이 제공한 배송 주소.
</ResponseField>

<ResponseField name="utm_source" type="string | null">
  속성 추적을 위한 UTM 소스 매개변수.
</ResponseField>

<ResponseField name="utm_medium" type="string | null">
  속성 추적을 위한 UTM 매체 매개변수.
</ResponseField>

<ResponseField name="utm_campaign" type="string | null">
  속성 추적을 위한 UTM 캠페인 매개변수.
</ResponseField>

<ResponseField name="expires_at" type="string">
  ISO 8601 만료 타임스탬프.
</ResponseField>

<ResponseField name="created_at" type="string">
  ISO 8601 생성 타임스탬프.
</ResponseField>

<ResponseField name="completed_at" type="string | null">
  ISO 8601 완료 타임스탬프.
</ResponseField>

### 세션 상태

| 상태 | 설명 |
|--------|-------------|
| `open` | 세션이 활성 상태이며 고객의 결제를 기다립니다. |
| `processing` | 고객이 결제를 시작했으며, 체인상에서 거래가 처리 중입니다. |
| `completed` | 결제가 확인되어 수령인에게 받았습니다. |
| `expired` | 고객이 결제를 완료하기 전에 세션이 만료되었습니다. |
| `failed` | 체인 오류 또는 시간 초과로 인해 결제가 실패했습니다. |

### URL 템플릿 변수

`success_url` 및 `cancel_url` 필드는 고객이 리디렉션될 때 실제 값으로 대체되는 템플릿 변수를 지원합니다:

| 변수 | 설명 | 예시 |
|----------|-------------|---------|
| `{SESSION_ID}` | 체크아웃 세션 ID | `cs_abc123` |

<Tip>
  리디렉션 후 서버에서 세션 세부 정보를 조회하기 위해 템플릿 변수를 사용하세요:
  `https://example.com/success?session_id={SESSION_ID}`
</Tip>

---

## 체크아웃 세션 목록

체크아웃 세션의 페이지별 목록을 검색합니다.

<ParamField query="status" type="string">
  세션 상태로 필터링: `open`, `processing`, `completed`, `expired`, `failed`.
</ParamField>

<ParamField query="payment_link_id" type="string">
  결제 링크 ID로 필터링.
</ParamField>

<ParamField query="page" type="number" default={1}>
  페이지 번호를 위한 페이징.
</ParamField>

<ParamField query="limit" type="number" default={20}>
  페이지 당 결과 수 (최대 100).
</ParamField>

<CodeGroup>
```bash cURL
curl -X GET "https://platform-api.anyspend.com/api/v1/checkout-sessions?status=completed&page=1&limit=20" \
  -H "Authorization: Bearer asp_xxx"
```

```typescript SDK
import { AnySpend } from "@b3dotfun/sdk";

const anyspend = new AnySpend(process.env.ANYSPEND_API_KEY!);

const { data, pagination } = await anyspend.checkoutSessions.list({
  status: "completed",
  page: 1,
  limit: 20,
});
```
</CodeGroup>

<Tabs>
  <Tab title="Response">
    ```json
    {
      "data": [
        {
          "id": "cs_abc123",
          "url": "https://pay.anyspend.com/s/cs_abc123",
          "status": "completed",
          "payment_link_id": "pl_abc123",
          "product_id": null,
          "token_address": "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",
          "chain_id": 1,
          "recipient_address": "0x1234567890abcdef1234567890abcdef12345678",
          "amount": "50000000",
          "amount_usd": "50.00",
          "success_url": "https://example.com/success?session_id=cs_abc123",
          "cancel_url": "https://example.com/cancel",
          "client_reference_id": "order_12345",
          "metadata": {
            "order_id": "12345"
          },
          "payer_address": "0xaabb1234ccdd5678eeff9900aabb1234ccdd5678",
          "tx_hash": "0x9f8e7d6c5b4a3f2e1d0c9b8a7f6e5d4c3b2a1f0e",
          "customer_id": "cust_abc123",
          "form_data": null,
          "shipping_address": null,
          "utm_source": "twitter",
          "utm_medium": "social",
          "utm_campaign": "launch_feb_2026",
          "expires_at": "2026-02-25T08:45:00Z",
          "created_at": "2026-02-25T08:15:00Z",
          "completed_at": "2026-02-25T08:16:30Z"
        }
      ],
      "pagination": {
        "page": 1,
        "limit": 20,
        "total": 340,
        "total_pages": 17,
        "has_more": true
      }
    }
    ```
  </Tab>
</Tabs>

---

## 체크아웃 세션 생성

고유한 결제 URL이 포함된 서버 측 체크아웃 세션을 생성합니다. 백엔드에서 체크아웃 흐름을 제어하는 프로그래매틱 통합에 이를 사용하세요.

<ParamField body="payment_link_id" type="string">
  기존 결제 링크에서 세션을 생성합니다. 이는 링크의 구성을 상속합니다. `payment_link_id` 또는 수동 필드(`token_address`, `chain_id`, `recipient_address`, `amount`)가 필요합니다.
</ParamField>

<ParamField body="token_address" type="string">
  받을 토큰의 계약 주소. `payment_link_id`가 제공되지 않은 경우 필요합니다.
</ParamField>

<ParamField body="chain_id" type="number">
  결제를 받고 싶은 체인 ID. `payment_link_id`가 제공되지 않은 경우 필요합니다.
</ParamField>

<ParamField body="recipient_address" type="string">
  결제를 받는 지갑 주소. `payment_link_id`가 제공되지 않은 경우 필요합니다.
</ParamField>

<ParamField body="amount" type="string">
  토큰의 최소 단위로의 결제 금액. `payment_link_id`가 제공되지 않은 경우 필요합니다.
</ParamField>

<ParamField body="product_id" type="string">
  세션을 제품과 연결합니다.
</ParamField>

<ParamField body="success_url" type="string">
  결제 성공 후 고객을 리디렉션할 URL. `{SESSION_ID}` 템플릿 변수를 지원합니다.
</ParamField>

<ParamField body="cancel_url" type="string">
  고객이 취소할 경우 리디렉션할 URL.
</ParamField>

<ParamField body="client_reference_id" type="string">
  귀하의 내부 참조 ID(예: 주문 ID). 최대 200자.
</ParamField>

<ParamField body="metadata" type="object">
  웹훅과 결과 거래를 통해 전달되는 임의의 키-값 쌍. 최대 50개의 키, 500자 값.
</ParamField>

<ParamField body="customer_email" type="string">
  고객의 이메일 주소. 저장 시 암호화되며 주문 이행을 위한 웹훅 페이로드에 포함됩니다.
</ParamField>

<ParamField body="customer_name" type="string">
  고객의 이름. 저장 시 암호화되며 주문 이행을 위한 웹훅 페이로드에 포함됩니다.
</ParamField>

<ParamField body="expires_in" type="number" default={1800}>
  세션 만료 시간(초). 최소 300(5분), 최대 86400(24시간). 기본값: 1800(30분).
</ParamField>

<ParamField body="utm_source" type="string">
  속성 추적을 위한 UTM 소스.
</ParamField>

<ParamField body="utm_medium" type="string">
  속성 추적을 위한 UTM 매체.
</ParamField>

<ParamField body="utm_campaign" type="string">
  속성 추적을 위한 UTM 캠페인.
</ParamField>

<CodeGroup>
```bash cURL
# 결제 링크에서 생성
curl -X POST "https://platform-api.anyspend.com/api/v1/checkout-sessions" \
  -H "Authorization: Bearer asp_xxx" \
  -H "Content-Type: application/json" \
  -d '{
    "payment_link_id": "pl_abc123",
    "success_url": "https://example.com/success?session_id={SESSION_ID}",
    "cancel_url": "https://example.com/cancel",
    "client_reference_id": "order_12345",
    "metadata": {
      "order_id": "12345"
    },
    "customer_email": "alice@example.com",
    "customer_name": "Alice Smith",
    "expires_in": 3600
  }'

# 수동 구성으로 생성
curl -X POST "https://platform-api.anyspend.com/api/v1/checkout-sessions" \
  -H "Authorization: Bearer asp_xxx" \
  -H "Content-Type: application/json" \
  -d '{
    "token_address": "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",
    "chain_id": 1,
    "recipient_address": "0x1234567890abcdef1234567890abcdef12345678",
    "amount": "25000000",
    "success_url": "https://example.com/success?session_id={SESSION_ID}",
    "cancel_url": "https://example.com/cancel",
    "client_reference_id": "inv_67890",
    "utm_source": "email",
    "utm_medium": "newsletter",
    "utm_campaign": "february_promo"
  }'
```

```typescript SDK
// 결제 링크에서 생성
const session = await anyspend.checkoutSessions.create({
  paymentLinkId: "pl_abc123",
  successUrl: "https://example.com/success?session_id={SESSION_ID}",
  cancelUrl: "https://example.com/cancel",
  clientReferenceId: "order_12345",
  metadata: {
    order_id: "12345",
    user_email: "alice@example.com",
  },
  expiresIn: 3600,
});

// 고객을 리디렉션
console.log(session.url);
// => "https://pay.anyspend.com/s/cs_newSession123"

// 수동 구성으로 생성
const manualSession = await anyspend.checkoutSessions.create({
  tokenAddress: "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",
  chainId: 1,
  recipientAddress: "0x1234567890abcdef1234567890abcdef12345678",
  amount: "25000000",
  successUrl: "https://example.com/success?session_id={SESSION_ID}",
  cancelUrl: "https://example.com/cancel",
  clientReferenceId: "inv_67890",
});
```
</CodeGroup>

<Tabs>
  <Tab title="Response">
    ```json
    {
      "id": "cs_newSession123",
      "url": "https://pay.anyspend.com/s/cs_newSession123",
      "status": "open",
      "payment_link_id": "pl_abc123",
      "product_id": null,
      "token_address": "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",
      "chain_id": 1,
      "recipient_address": "0x1234567890abcdef1234567890abcdef12345678",
      "amount": "50000000",
      "amount_usd": "50.00",
      "success_url": "https://example.com/success?session_id={SESSION_ID}",
      "cancel_url": "https://example.com/cancel",
      "client_reference_id": "order_12345",
      "metadata": {
        "order_id": "12345",
        "user_email": "alice@example.com"
      },
      "payer_address": null,
      "tx_hash": null,
      "customer_id": null,
      "form_data": null,
      "shipping_address": null,
      "utm_source": null,
