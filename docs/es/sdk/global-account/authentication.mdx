---
title: Autenticación
description: Aprende cómo implementar autenticación con B3 Global Accounts
lang: es
originalPath: sdk/global-account/authentication.mdx
---
<Tip>
  **Para Desarrolladores**: Todas las demos están alojadas en la aplicación [global-accounts](https://github.com/b3-fun/b3/tree/main/apps/global-accounts). Para probar localmente, ejecute `pnpm dev` en el directorio global-accounts y acceda a las demos en `http://localhost:5173/demos`.
</Tip>

## Demo Interactiva

Experimenta la autenticación B3 en acción con todos los proveedores disponibles:

<iframe
  src="https://global.b3.fun/demos?embedded=true#auth-all"
  style={{
    width: '100%',
    height: '500px',
    border: '1px solid #e5e7eb',
    borderRadius: '8px',
    marginTop: '16px',
    marginBottom: '16px',
    overscrollBehavior: 'contain' 
  }}
  title="Demostración de Autenticación B3"
/>

<Note>
  Esta es una **demo interactiva en vivo** utilizando el SDK actual de B3. Cuando no especificas `strategies`, se muestran todas las opciones de autenticación disponibles. Ve la [página completa de la demo](https://global.b3.fun/demos) para más ejemplos.
</Note>

## Estrategias de Autenticación

Las Cuentas Globales B3 admiten múltiples estrategias de autenticación para adaptarse a las necesidades de tu aplicación.

## Inicio de Sesión Social

### Autenticación de Google

<iframe
  src="https://global.b3.fun/demos?embedded=true#auth-google"
  style={{
    width: '100%',
    height: '300px',
    border: '1px solid #e5e7eb',
    borderRadius: '8px',
    marginTop: '16px',
    marginBottom: '16px',
    overscrollBehavior: 'contain' 
  }}
  title="Demostración de Autenticación de Google"
/>

```tsx
import { SignInWithB3 } from "@b3dotfun/sdk/global-account/react";

const b3Chain = {
  id: 8333,
  name: "B3",
  nativeCurrency: { name: "Ether", symbol: "ETH", decimals: 18 },
  rpc: "https://mainnet-rpc.b3.fun",
};

function GoogleAuth() {
  return (
    <SignInWithB3
      strategies={["google"]}
      chain={b3Chain}
      partnerId="your-partner-id"
      onLoginSuccess={(globalAccount) => {
        console.log("Autenticación de Google exitosa:", globalAccount);
      }}
      onError={async (error) => {
        console.error("Falló la autenticación:", error);
      }}
    />
  );
}
```

### Autenticación de Discord

```tsx
import { SignInWithB3 } from "@b3dotfun/sdk/global-account/react";

const b3Chain = {
  id: 8333,
  name: "B3",
  nativeCurrency: { name: "Ether", symbol: "ETH", decimals: 18 },
  rpc: "https://mainnet-rpc.b3.fun",
};

function DiscordAuth() {
  return (
    <SignInWithB3
      strategies={["discord"]}
      chain={b3Chain}
      partnerId="your-partner-id"
      onLoginSuccess={(globalAccount) => {
        console.log("Autenticación de Discord exitosa:", globalAccount);
      }}
      onError={async (error) => {
        console.error("Falló la autenticación:", error);
      }}
    />
  );
}
```

## Múltiples Estrategias Específicas

Puedes permitir que los usuarios elijan entre múltiples proveedores de autenticación específicos:

<iframe
  src="https://global.b3.fun/demos?embedded=true#auth-full"
  style={{
    width: '100%',
    height: '300px',
    border: '1px solid #e5e7eb',
    borderRadius: '8px',
    marginTop: '16px',
    marginBottom: '16px',
    overscrollBehavior: 'contain' 
  }}
  title="Demostración de Múltiples Estrategias de Autenticación"
/>

```tsx
import { SignInWithB3 } from "@b3dotfun/sdk/global-account/react";

const b3Chain = {
  id: 8333,
  name: "B3",
  nativeCurrency: { name: "Ether", symbol: "ETH", decimals: 18 },
  rpc: "https://mainnet-rpc.b3.fun",
};

function MultipleAuthOptions() {
  return (
    <SignInWithB3
      strategies={["google", "discord", "x"]}
      chain={b3Chain}
      partnerId="your-partner-id"
      onLoginSuccess={(globalAccount) => {
        console.log("Autenticación exitosa:", globalAccount);
      }}
    />
  );
}
```

<Note>
  Especifica un arreglo de estrategias para mostrar solo esas opciones de autenticación a tus usuarios.
</Note>

## Autenticación sin Interfaz

Para implementaciones personalizadas, utiliza el servicio de autenticación sin interfaz:

### Autenticación Básica

```typescript
import { authenticate } from "@b3dotfun/sdk/global-account/app";

async function authenticateUser(accessToken: string, identityToken: string) {
  try {
    const authResult = await authenticate(accessToken, identityToken, {
      // configuración adicional
    });
    
    if (authResult) {
      console.log("Autenticación exitosa:", authResult);
      return authResult;
    } else {
      console.log("Falló la autenticación");
      return null;
    }
  } catch (error) {
    console.error("Error de autenticación:", error);
    throw error;
  }
}
```

### Autenticación en React Native

```typescript
// Para aplicaciones React Native
import { authenticate } from "@b3dotfun/sdk/global-account/app";

async function authenticateInReactNative() {
  const result = await authenticate("access-token", "identity-token");
  return result;
}
```

## Hooks de Autenticación

### Hook useB3

El hook principal para acceder al estado de autenticación:

```tsx
import { useB3 } from "@b3dotfun/sdk/global-account/react";

function AuthStatus() {
  const { account, user } = useB3();

  return (
    <div>
      {account ? (
        <div>
          <p>Bienvenido, {user?.displayName}!</p>
          <p>Dirección de la Cuenta: {account.address}</p>
        </div>
      ) : (
        <p>Por favor, inicia sesión</p>
      )}
    </div>
  );
}
```

<Note>
  El hook `useB3` proporciona acceso a la `account` autenticada (cuenta de billetera) y al `user` (datos del perfil del usuario). Usa `useAuthStore` para acceder a los estados de carga y autenticación.
</Note>

### Hook useAccountWallet

Accede a la información de la billetera y al estado de la conexión:

```tsx
import { useAccountWallet } from "@b3dotfun/sdk/global-account/react";

function WalletInfo() {
  const { wallet, address, ensName } = useAccountWallet();

  return (
    <div>
      {address && (
        <div>
          <p>Dirección de la Billetera: {address}</p>
          {ensName && <p>ENS: {ensName}</p>}
          {wallet?.meta?.icon && <img src={wallet.meta.icon} alt="Icono de la billetera" />}
        </div>
      )}
    </div>
  );
}
```

## Manejo de Errores

Implementa un manejo de errores adecuado para los flujos de autenticación:

```tsx
function AuthWithErrorHandling() {
  const [authError, setAuthError] = useState<string | null>(null);

  return (
    <div>
      <SignInWithB3
        strategies={["google", "discord"]}
        chain={b3Chain}
        partnerId="your-partner-id"
        onLoginSuccess={(globalAccount) => {
          setAuthError(null);
          console.log("Éxito:", globalAccount);
        }}
        onError={async (error) => {
          setAuthError(error.message);
          console.error("Error de autenticación:", error);
        }}
      />
      
      {authError && (
        <div className="error">
          Autenticación fallida: {authError}
        </div>
      )}
    </div>
  );
}
```

## Mejores Prácticas

<CardGroup cols={2}>

<Card title="ID de Socio" icon="id-badge">
  Utiliza siempre tu ID de socio único para una correcta atribución y análisis.
</Card>

<Card title="Manejo de Errores" icon="exclamation-triangle">
  Implementa un manejo de errores completo para una mejor experiencia del usuario.
</Card>

<Card title="Gestión de Sesiones" icon="clock">
  Establece duraciones de sesión apropiadas basadas en las necesidades de seguridad de tu aplicación.
</Card>

<Card title="Configuración del Entorno" icon="settings">
  Utiliza variables de entorno adecuadas para diferentes etapas de despliegue.
</Card>

</CardGroup>

## Referencia de la API del Componente

### SignInWithB3

El componente principal del botón de autenticación.

#### Props

<ParamField path="strategies" type="AllowedStrategy[]">
  Arreglo de estrategias de autenticación para mostrar. Las opciones incluyen: `"google"`, `"discord"`, `"x"`, `"apple"`, `"walletConnect"`, `"io.metamask"`, `"com.coinbase.wallet"`. 
  
  Deja sin definir para mostrar todas las opciones.
</ParamField>

<ParamField path="chain" type="Chain" required>
  Objeto de configuración de la cadena de blockchain con `id`, `name`, `nativeCurrency`, y `rpc`.
</ParamField>

<ParamField path="partnerId" type="string" required>
  Tu ID de socio único para las Cuentas Globales B3.
</ParamField>

<ParamField path="onLoginSuccess" type="(account: Account) => void">
  Función de callback llamada cuando la autenticación tiene éxito.
</ParamField>

<ParamField path="onError" type="(error: Error) => Promise<void>">
  Función de callback asíncrona llamada cuando ocurre un error.
</ParamField>

<ParamField path="closeAfterLogin" type="boolean" default="false">
  Si se debe cerrar el modal después del inicio de sesión exitoso.
</ParamField>

<ParamField path="buttonText" type="string | ReactNode">
  Texto o componente personalizado para el botón de inicio de sesión.
</ParamField>

<ParamField path="withLogo" type="boolean" default="true">
  Si se debe mostrar el logo de B3 en el botón.
</ParamField>

## Estrategias de Autenticación Disponibles

Las Cuentas Globales B3 admiten los siguientes métodos de autenticación:

<table>
  <thead>
    <tr>
      <th>Estrategia</th>
      <th>Tipo</th>
      <th>Descripción</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>`"google"`</td>
      <td>Social</td>
      <td>Autenticación OAuth de Google</td>
    </tr>
    <tr>
      <td>`"discord"`</td>
      <td>Social</td>
      <td>Autenticación OAuth de Discord</td>
    </tr>
    <tr>
      <td>`"x"`</td>
      <td>Social</td>
      <td>Autenticación de X (anteriormente Twitter)</td>
    </tr>
    <tr>
      <td>`"apple"`</td>
      <td>Social</td>
      <td>Iniciar sesión con Apple</td>
    </tr>
    <tr>
      <td>`"guest"`</td>
      <td>Sin contraseña</td>
      <td>Autenticación de invitado sin registro</td>
    </tr>
    <tr>
      <td>`"walletConnect"`</td>
      <td>Billetera</td>
      <td>Protocolo WalletConnect</td>
    </tr>
    <tr>
      <td>`"io.metamask"`</td>
      <td>Billetera</td>
      <td>Extensión de navegador MetaMask</td>
    </tr>
    <tr>
      <td>`"com.coinbase.wallet"`</td>
      <td>Billetera</td>
      <td>Billetera de Coinbase</td>
    </tr>
  </tbody>
</table>

## Próximos Pasos

<CardGroup cols={2}>

<Card title="Referencia de Hooks" icon="react" href="/sdk/global-account/hooks">
  Explora todos los hooks de React disponibles.
</Card>

<Card title="Ejemplos" icon="code" href="/sdk/global-account/examples">
  Ve ejemplos completos de integración.
</Card>

<Card title="Prueba la Demo" icon="play" href="https://login-minimal-b3.vercel.app/">
  Aplicación demo interactiva de autenticación.
</Card>

</CardGroup>
