---
title: Hooks
description: >-
  React hooks para cotizaciones, pedidos, transferencias, onramp y sesiones de
  pago
lang: es
originalPath: anyspend/hooks.mdx
---
Utiliza estos hooks cuando los componentes preconstruidos no se ajusten a tu UI. Te brindan acceso directo a cotizaciones, creación de órdenes, seguimiento de estado y lógica de rampa de entrada de fiat.

<CardGroup cols={3}>
<Card title="Hooks de Orden" icon="plus-circle" href="#order-hooks">
  Crear órdenes, obtener cotizaciones, rastrear pagos
</Card>
<Card title="Hooks de Pago" icon="wallet" href="#payment-hooks">
  Transferencias directas, precios de gas
</Card>
<Card title="Fiat & Onramp" icon="credit-card" href="#fiat--onramp-hooks">
  Stripe, Coinbase, opciones basadas en geolocalización
</Card>
</CardGroup>

---

## Hooks de Orden

### `useAnyspendQuote`

Obtén precios en tiempo real para intercambios de tokens y transacciones entre cadenas. Las cotizaciones se actualizan automáticamente cada 10 segundos.

```tsx title="Uso Básico" icon="chart-line"
import { useAnyspendQuote } from "@b3dotfun/sdk/anyspend";

const {
  anyspendQuote,
  isLoadingAnyspendQuote,
  getAnyspendQuoteError,
  refetchAnyspendQuote
} = useAnyspendQuote(quoteRequest);
```

#### Parámetros

<ParamField path="quoteRequest" type="QuoteRequest" required>
  Objeto de configuración de cotización
</ParamField>

```typescript title="QuoteRequest" icon="code"
interface QuoteRequest {
  srcChain: number;         // ID de cadena de origen
  dstChain: number;         // ID de cadena de destino
  srcTokenAddress: string;  // Dirección del contrato del token de origen
  dstTokenAddress: string;  // Dirección del contrato del token de destino
  type: "swap" | "custom";  // Tipo de orden
  tradeType: "EXACT_INPUT" | "EXACT_OUTPUT";
  amount: string;           // Monto en la unidad más pequeña (wei)
}
```

#### Devuelve

<ResponseField name="anyspendQuote" type="QuoteResponse | null">
  Datos de cotización con precios, tarifas y salida esperada
</ResponseField>

<ResponseField name="isLoadingAnyspendQuote" type="boolean">
  Estado de carga
</ResponseField>

<ResponseField name="getAnyspendQuoteError" type="Error | null">
  Error si la solicitud de cotización falló
</ResponseField>

<ResponseField name="refetchAnyspendQuote" type="() => void">
  Actualizar manualmente la cotización
</ResponseField>

#### Ejemplo

```tsx title="Vista Previa de Cotización de Intercambio" icon="exchange-alt"
function SwapQuote() {
  const quoteRequest = {
    srcChain: 1,
    dstChain: 8453,
    srcTokenAddress: "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48", // USDC en Ethereum
    dstTokenAddress: "0x0000000000000000000000000000000000000000", // ETH
    type: "swap" as const,
    tradeType: "EXACT_INPUT" as const,
    amount: "1000000", // 1 USDC
  };

  const { anyspendQuote, isLoadingAnyspendQuote, getAnyspendQuoteError } =
    useAnyspendQuote(quoteRequest);

  if (isLoadingAnyspendQuote) return <div>Obteniendo el mejor precio...</div>;
  if (getAnyspendQuoteError) return <div>Fallo al obtener la cotización</div>;

  return (
    <div>
      <p>Recibirás: {anyspendQuote?.expectedOutput} ETH</p>
      <p>Tarifa de red: ${anyspendQuote?.networkFeeUsd}</p>
      <p>Tarifa de servicio: ${anyspendQuote?.serviceFeeUsd}</p>
    </div>
  );
}
```

---

### `useAnyspendCreateOrder`

Crea y ejecuta órdenes AnySpend para pagos con criptomonedas.

```tsx title="Uso Básico" icon="plus-circle"
import { useAnyspendCreateOrder } from "@b3dotfun/sdk/anyspend";

const { createOrder, isCreatingOrder } = useAnyspendCreateOrder({
  onSuccess: (data) => console.log("Orden creada:", data.data.id),
  onError: (error) => console.error("Falló:", error.message),
});
```

#### Parámetros

<ParamField path="options" type="UseAnyspendCreateOrderProps">
  Configuración con funciones de callback
</ParamField>

```typescript title="UseAnyspendCreateOrderProps" icon="code"
interface UseAnyspendCreateOrderProps {
  onSuccess?: (data: CreateOrderResponse) => void;
  onError?: (error: Error) => void;
  onSettled?: () => void;
}
```

#### Devuelve

<ResponseField name="createOrder" type="(params: CreateOrderParams) => void">
  Función para crear una orden
</ResponseField>

<ResponseField name="isCreatingOrder" type="boolean">
  Estado de carga
</ResponseField>

```typescript title="CreateOrderParams" icon="code"
interface CreateOrderParams {
  recipientAddress: string;
  orderType: string;          // "swap", "hype_duel", "custom_exact_in", etc.
  srcChain: number;
  dstChain: number;
  srcToken: Token;
  dstToken: Token;
  srcAmount: string;
  expectedDstAmount?: string;
  creatorAddress?: string;
  metadata?: Record<string, unknown>;
  callbackMetadata?: Record<string, unknown>;
  nft?: NFT & { price: string };
  tournament?: Tournament & { contractAddress: string; entryPriceOrFundAmount: string };
  payload?: any;
}
```

#### Ejemplo

```tsx title="Formulario de Pago" icon="credit-card"
function PaymentForm() {
  const { createOrder, isCreatingOrder } = useAnyspendCreateOrder({
    onSuccess: (data) => {
      router.push(`/payment/${data.data.id}`);
    },
    onError: (error) => {
      toast.error("El pago falló. Por favor, intenta de nuevo.");
    },
  });

  const handlePayment = () => {
    createOrder({
      recipientAddress: merchantAddress,
      orderType: "swap",
      srcChain: 1,
      dstChain: 8453,
      srcToken: { chainId: 1, address: "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48", name: "USD Coin", symbol: "USDC", decimals: 6 },
      dstToken: { chainId: 8453, address: "0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913", name: "USD Coin", symbol: "USDC", decimals: 6 },
      srcAmount: "10000000",
      creatorAddress: userAddress,
    });
  };

  return (
    <button onClick={handlePayment} disabled={isCreatingOrder}>
      {isCreatingOrder ? "Procesando..." : "Pagar 10 USDC"}
    </button>
  );
}
```

---

### `useAnyspendCreateOnrampOrder`

Crea órdenes para pagos de rampa de entrada de fiat (Stripe, Coinbase Pay).

```tsx title="Uso Básico" icon="credit-card"
import { useAnyspendCreateOnrampOrder } from "@b3dotfun/sdk/anyspend";

const { createOrder, isCreatingOrder } = useAnyspendCreateOnrampOrder({
  onSuccess: (data) => {
    // Redirigir al usuario al proveedor de rampa de entrada
    window.location.href = data.data.oneClickBuyUrl;
  },
});
```

#### Parámetros

```typescript title="UseAnyspendCreateOnrampOrderProps" icon="code"
interface UseAnyspendCreateOnrampOrderProps {
  onSuccess?: (data: CreateOrderResponse) => void;
  onError?: (error: Error) => void;
}
```

#### Devuelve

<ResponseField name="createOrder" type="(params: CreateOnrampOrderParams) => void">
  Función para crear una orden de rampa de entrada de fiat
</ResponseField>

<ResponseField name="isCreatingOrder" type="boolean">
  Estado de carga
</ResponseField>

```typescript title="CreateOnrampOrderParams" icon="code"
type CreateOnrampOrderParams = {
  recipientAddress: string;
  orderType: string;
  dstChain: number;
  dstToken: Token;
  expectedDstAmount?: string;
  srcFiatAmount: string;       // Monto en fiat (p. ej., "10.00")
  onramp: {
    vendor: "coinbase" | "stripe";
    paymentMethod: string;     // p. ej., "card"
    country: string;           // Código de país ISO
    redirectUrl: string;       // URL para redirigir después del pago
  };
};
```

---

## Hooks de seguimiento de órdenes

### `useAnyspendOrderAndTransactions`

Monitorea el estado de la orden y rastrea las transacciones asociadas en la cadena de bloques en tiempo real.

```tsx title="Uso Básico" icon="eye"
import { useAnyspendOrderAndTransactions } from "@b3dotfun/sdk/anyspend";

const {
  orderAndTransactions,
  isLoadingOrderAndTransactions,
  getOrderAndTransactionsError
} = useAnyspendOrderAndTransactions(orderId);
```

#### Parámetros

<ParamField path="orderId" type="string" required>
  ID de la orden a rastrear
</ParamField>

#### Devuelve

<ResponseField name="orderAndTransactions" type="OrderWithTransactions | null">
  Datos completos de la orden con detalles de transacciones
</ResponseField>

<ResponseField name="isLoadingOrderAndTransactions" type="boolean">
  Estado de carga
</ResponseField>

<ResponseField name="getOrderAndTransactionsError" type="Error | null">
  Error si la búsqueda falló
</ResponseField>

```typescript title="OrderWithTransactions" icon="code"
interface OrderWithTransactions {
  data: {
    order: Order;               // Detalles y estado de la orden
    depositTxs: Transaction[];  // Transacciones de depósito del usuario
    relayTx?: Transaction;      // Transacción de relevo entre cadenas
    executeTx?: Transaction;    // Transacción de ejecución final
    refundTxs: Transaction[];   // Transacciones de reembolso (si las hay)
  };
}
```

#### Ejemplo

```tsx title="Rastreador de Órdenes" icon="eye"
function OrderTracker({ orderId }: { orderId: string }) {
  const { orderAndTransactions, isLoadingOrderAndTransactions } =
    useAnyspendOrderAndTransactions(orderId);

  if (isLoadingOrderAndTransactions) return <div>Cargando...</div>;

  const { order, depositTxs, executeTx } = orderAndTransactions!.data;

  return (
    <div>
      <h2>Orden #{orderId.slice(0, 8)}</h2>
      <p>Estado: {order.status}</p>
      {executeTx && (
        <a href={`https://basescan.org/tx/${executeTx.txHash}`}>
          Ver Transacción
        </a>
      )}
    </div>
  );
}
```

---

### `useAnyspendOrderHistory`

Recupera el historial de órdenes paginado para una dirección de usuario.

```tsx title="Uso Básico" icon="clock-rotate-left"
import { useAnyspendOrderHistory } from "@b3dotfun/sdk/anyspend";

const { orderHistory, isLoadingOrderHistory } =
  useAnyspendOrderHistory(creatorAddress, limit, offset);
```

#### Parámetros

<ParamField path="creatorAddress" type="string" required>
  Dirección de billetera del usuario
</ParamField>

<ParamField path="limit" type="number" required>
  Número de órdenes a recuperar (máx. 100)
</ParamField>

<ParamField path="offset" type="number" required>
  Desplazamiento de paginación
</ParamField>

---

## Hooks de tokens y cadenas

### `useAnyspendTokens`

Obtiene los tokens disponibles para una cadena específica con búsqueda opcional.

```tsx title="Uso Básico" icon="coins"
import { useAnyspendTokens } from "@b3dotfun/sdk/anyspend";

const { tokens, isLoadingTokens } = useAnyspendTokens(chainId, searchQuery);
```

#### Parámetros

<ParamField path="chainId" type="number" required>
  ID de cadena para obtener tokens
</ParamField>

<ParamField path="searchQuery" type="string">
  Filtro de búsqueda opcional (nombre o símbolo del token)
</ParamField>

---

### `useGasPrice`

Obtiene precios de gas en tiempo real para una cadena con detección de picos.

```tsx title="Uso Básico" icon="gas-pump"
import { useGasPrice } from "@b3dotfun/sdk/anyspend";

const { gasPrice, isLoading, isSpike, refetch } = useGasPrice(chainId);
```

#### Parámetros

<ParamField path="chainId" type="number">
  ID de cadena para obtener el precio de gas
</ParamField>

<ParamField path="options" type="UseGasPriceOptions">
  Configuración opcional
</ParamField>

```typescript title="UseGasPriceOptions" icon="code"
interface UseGasPriceOptions {
  /** Intervalo de refresco en ms (predeterminado: 10000) */
  refetchInterval?: number;
  /** Habilitar/deshabilitar la consulta (predeterminado: true si la cadena es compatible) */
  enabled?: boolean;
}
```

#### Devuelve

<ResponseField name="gasPrice" type="GasPriceData | undefined">
  Datos de precio de gas incluyendo estimaciones rápido, estándar y lento
</ResponseField>

<ResponseField name="isLoading" type="boolean">
  Estado de carga
</ResponseField>

<ResponseField name="isSpike" type="boolean">
  Si el gas está actualmente en un pico por encima de los niveles normales
</ResponseField>

<ResponseField name="isError" type="boolean">
  Si hay un error
</ResponseField>

<ResponseField name="error" type="Error | null">
  Objeto de error
</ResponseField>

<ResponseField name="refetch" type="() => void">
  Refrescar manualmente el precio del gas
</ResponseField>

---

## Hooks de pago

### `useDirectTransfer`

Ejecuta transferencias directas cuando el token/cadena de origen y destino coinciden, evitando el backend de intercambio para transacciones más rápidas y económicas.

```tsx title="Uso Básico" icon="arrow-right"
import { useDirectTransfer } from "@b3dotfun/sdk/anyspend";

const { executeDirectTransfer, isTransferring } = useDirectTransfer();
```

#### Devuelve

<ResponseField name="executeDirectTransfer" type="(params: DirectTransferParams) => Promise<string | undefined>">
  Ejecuta una transferencia directa. Devuelve el hash de la transacción en caso de éxito.
</ResponseField>

<ResponseField name="isTransferring" type="boolean">
  Estado de carga
</ResponseField>

```typescript title="DirectTransferParams" icon="code"
interface DirectTransferParams {
  chainId: number;
  tokenAddress: string;
  recipientAddress: string;
  amount: bigint;
  method: CryptoPaymentMethodType; // "CONNECT_WALLET" | "GLOBAL_WALLET"
}
```

#### Ejemplo

```tsx title="Botón de Transferencia Directa" icon="arrow-right"
function DirectTransferButton({ token, recipient, amount }) {
  const { executeDirectTransfer, isTransferring } = useDirectTransfer();

  const handleTransfer = async () => {
    const txHash = await executeDirectTransfer({
      chainId: token.chainId,
      tokenAddress: token.address,
      recipientAddress: recipient,
      amount: BigInt(amount),
      method: CryptoPaymentMethodType.CONNECT_WALLET,
    });

    if (txHash) {
      toast.success("¡Transferencia completa!");
    }
  };

  return (
    <button onClick={handleTransfer} disabled={isTransferring}>
      {isTransferring ? "Transfiriendo..." : "Enviar Tokens"}
    </button>
  );
}
```

---

## Hooks de fiat y onramp

### `useGeoOnrampOptions`

Obtén todas las opciones de rampa de entrada disponibles basadas en la ubicación geográfica del usuario. Combina detección geográfica, disponibilidad de Coinbase y soporte de Stripe.

```tsx title="Uso Básico" icon="globe"
import { useGeoOnrampOptions } from "@b3dotfun/sdk/anyspend";

const {
  isOnrampSupported,
  coinbaseOnrampOptions,
  stripeOnrampSupport,
  stripeWeb2Support,
  isLoading,
} = useGeoOnrampOptions(fiatAmount);
```

#### Parámetros

<ParamField path="srcFiatAmount" type="string" required>
  El monto en fiat para la rampa de entrada (p. ej., `"50"`)
</ParamField>

#### Devuelve

<ResponseField name="isOnrampSupported" type="boolean">
  Si alguna rampa de entrada de fiat está disponible para la ubicación del usuario
</ResponseField>

<ResponseField name="coinbaseOnrampOptions" type="object">
  Configuración de Coinbase Pay y métodos de pago disponibles
</ResponseField>

<ResponseField name="coinbaseAvailablePaymentMethods" type="array">
  Métodos de pago de Coinbase disponibles para la región del usuario
</ResponseField>

<ResponseField name="stripeOnrampSupport" type="boolean">
  Si el flujo de redirección de Stripe es compatible
</ResponseField>

<ResponseField name="stripeWeb2Support" type="object">
  Si el formulario embebido de Stripe es compatible (`{ isSupport: boolean }`)
</ResponseField>

<ResponseField name="
