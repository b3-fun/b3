---
title: Fase DEX
description: >-
  Operando en Uniswap v4 despu√©s de la migraci√≥n: intercambios, liquidez y
  trading descentralizado.
lang: es
originalPath: bondkit/concepts/dex-phase.mdx
---
## ¬øQu√© es la Fase DEX?

La fase DEX es la etapa final del ciclo de vida de un token de Bondkit, donde la negociaci√≥n transita de la curva de bonificaci√≥n automatizada a un pool completamente descentralizado de Uniswap v4. Esta fase comienza inmediatamente despu√©s de la migraci√≥n y representa la descentralizaci√≥n completa.

```mermaid
stateDiagram-v2
    [*] --> BondingPhase: Token Creado
    BondingPhase --> MigrationReady: Objetivo Alcanzado
    MigrationReady --> DEXPhase: migrateToDex()
    DEXPhase --> [*]: Completamente Descentralizado
    
    note right of BondingPhase
        Precios controlados por contrato
        5% de comisiones por negociaci√≥n
        Solo compra/venta directa
        Acumulaci√≥n de objetivo
    end note
    
    note right of DEXPhase
        Precios impulsados por el mercado
        Comisiones est√°ndar de DEX
        Funciones completas de negociaci√≥n
        Sin control administrativo
    end note
```

## C√≥mo Funciona la Migraci√≥n

### El Proceso de Transici√≥n

Cuando se llama a `migrateToDex()` despu√©s de alcanzar el objetivo:

1. **Estado del Contrato**: El estado del token cambia a `TokenStatus.Dex`
2. **Pool de Uniswap v4**: Se crea un nuevo pool con la liquidez acumulada
3. **Inicializaci√≥n del Precio**: El precio inicial del pool se calcula a partir del precio de salida de la curva de bonificaci√≥n
4. **Renuncia de Propiedad**: La propiedad del contrato se transfiere a la direcci√≥n cero
5. **Habilitaci√≥n de Negociaci√≥n**: La negociaci√≥n completa de DEX comienza inmediatamente

### Configuraci√≥n del Pool

**Configuraci√≥n Autom√°tica del Pool:**
```typescript
// El pool se crea con estos par√°metros (desde la migraci√≥n)
const poolConfig = {
  currency0: tradingToken < bondkitToken ? tradingToken : bondkitToken,
  currency1: tradingToken < bondkitToken ? bondkitToken : tradingToken,
  fee: 3000,        // Comisi√≥n est√°ndar de 0.3%
  tickSpacing: 60,  // Espaciado est√°ndar de ticks
  hooks: customHook // Hooks espec√≠ficos de Bondkit
};
```

**Liquidez Inicial:**
- **Token de Negociaci√≥n**: Todos los fondos acumulados de la fase de bonificaci√≥n
- **Tokens de Bondkit**: Cantidad calculada para igualar el precio de salida
- **Tokens LP**: Divididos entre el receptor de comisiones y quemados/distribuidos

## Negociaci√≥n en la Fase DEX

### Opciones de Negociaci√≥n

**Negociaci√≥n Est√°ndar de DEX:**
Los tokens de Bondkit en la fase DEX pueden ser negociados usando cualquier interfaz compatible con Uniswap v4, agregador de DEX o plataforma de negociaci√≥n.

**SDK Helper (Opcional):**
El SDK proporciona `BondkitSwapService` para una integraci√≥n simplificada si es necesario.

### Descubrimiento de Precios & Liquidez

**Precios Impulsados por el Mercado:**
- No m√°s curva de bonificaci√≥n algor√≠tmica
- Precio determinado por la oferta/demanda
- Din√°micas de libro de √≥rdenes en tiempo real
- Sujeto a la volatilidad del mercado

**Fuentes de Liquidez:**
```typescript
// Liquidez inicial de la migraci√≥n
const migrationData = {
  tradingTokenLiquidity: "10.0",    // ETH/B3 de la bonificaci√≥n
  bondkitTokenLiquidity: "500000",  // Cantidad de tokens calculada
  initialPrice: "0.00002",          // Precio por token
  totalValueLocked: "20.0"          // TVL combinado
};

// Liquidez adicional de:
// - LPs de la comunidad
// - Programas de incentivos  
// - Acumulaci√≥n de comisiones de negociaci√≥n
```

## Diferencias Clave de la Fase de Bonificaci√≥n

### Mec√°nicas de Negociaci√≥n

| Aspecto | Fase de Bonificaci√≥n | Fase DEX |
|--------|--------------|-----------|
| **Precios** | Curva algor√≠tmica | Oferta/demanda del mercado |
| **Liquidez** | Ilimitada (el contrato acu√±a) | Liquidez limitada del pool |
| **Comisiones** | 5% al receptor de comisiones | 0.3% a los LPs + protocolo |
| **Tipos de √ìrdenes** | Solo compra/venta | Funciones completas de DEX |
| **Impacto en el Precio** | Curva predecible | Depende de la profundidad de liquidez |
| **MEV** | No aplicable | Sujeto a MEV |

### Cambios en el Contrato Inteligente

**Transici√≥n de Estado:**
```typescript
// Verificar fase actual
const status = await token.getStatus();

if (status === TokenStatus.Dex) {
  // Usar m√©todos de negociaci√≥n de DEX
  const swapService = new BondkitSwapService(tokenAddress);
  // ... c√≥digo de negociaci√≥n de DEX
} else if (status === TokenStatus.Bonding) {
  // Usar m√©todos de curva de bonificaci√≥n
  await token.buy(amount, minTokensOut);
}
```

**Disponibilidad de M√©todos:**
- ‚úÖ `token.buy()` / `token.sell()` - **Deshabilitado** (se revertir√°)
- ‚úÖ Negociaci√≥n de DEX v√≠a `BondkitSwapService`
- ‚úÖ La funcionalidad est√°ndar ERC20 contin√∫a
- ‚úÖ Monitoreo de eventos para negociaciones de DEX

## Funciones Avanzadas de DEX

### Integraci√≥n de Hooks Personalizados

Los tokens de Bondkit en Uniswap v4 incluyen hooks personalizados para funcionalidades mejoradas:

```typescript
// Caracter√≠sticas de los hooks (aplicadas autom√°ticamente)
const hookFeatures = {
  beforeSwap: "C√°lculos de comisiones personalizadas",
  afterSwap: "Seguimiento de an√°lisis", 
  beforeAddLiquidity: "Recompensas LP",
  afterRemoveLiquidity: "Manejo de comisiones de salida"
};
```

### An√°lisis y Monitoreo

**Datos en Tiempo Real:**
```typescript
import TradingView from "@b3dotfun/sdk/bondkit/components/TradingView";

// Gr√°ficos profesionales con datos de DEX
function DEXTradingInterface({ tokenAddress, tokenSymbol }) {
  return (
    <div className="space-y-6">
      {/* Gr√°fico de precios con datos de DEX */}
      <TradingView 
        tokenAddress={tokenAddress}
        tokenSymbol={tokenSymbol}
        className="h-96 w-full"
      />
      
      {/* Interfaz de negociaci√≥n */}
      <SwapInterface tokenAddress={tokenAddress} />
    </div>
  );
}
```

**M√©tricas Disponibles:**
- Feeds de precios en tiempo real
- Volumen y cambio de 24h  
- Profundidad de liquidez
- Datos hist√≥ricos OHLCV
- Historial de transacciones
- An√°lisis de poseedores

### Provisi√≥n de Liquidez

**Convertirse en LP:**
```typescript
// A√±adir liquidez al pool de tokens de Bondkit
import { Pool, Position } from "@uniswap/v3-sdk";

const position = new Position({
  pool: bondkitPool,
  liquidity: targetLiquidity,
  tickLower: lowerTick,
  tickUpper: upperTick
});

// Ganar comisiones de negociaci√≥n + incentivos potenciales
```

**Beneficios LP:**
- **Comisiones de Negociaci√≥n**: Ganar el 0.3% de todo el volumen de intercambio
- **Programas de Incentivos**: Recompensas adicionales potenciales
- **Apreciaci√≥n del Precio**: Beneficiarse del crecimiento del token
- **P√©rdida Impermanente**: Los riesgos est√°ndar de AMM aplican

## An√°lisis del Impacto de la Migraci√≥n

### Para los Poseedores de Tokens

**Efectos Inmediatos:**
- ‚úÖ Los tokens siguen siendo completamente transferibles
- ‚úÖ Pueden negociarse en el mercado abierto
- ‚úÖ Sin per√≠odos de bloqueo
- ‚ö†Ô∏è El precio ahora est√° sujeto a la volatilidad del mercado
- ‚ö†Ô∏è No hay liquidez garantizada (depende de la profundidad del pool)

**Beneficios a Largo Plazo:**
- üöÄ Acceso a un ecosistema de negociaci√≥n m√°s amplio
- üöÄ Integraci√≥n con protocolos DeFi
- üöÄ Composabilidad con otros tokens
- üöÄ Se logra la verdadera descentralizaci√≥n

### Para Proyectos

**Cambios Operativos:**
```typescript
// Pre-migraci√≥n: Control directo
await token.buy(amount, minOut);    // ‚úÖ Funciona
await token.migrateToDex();         // Acci√≥n √∫nica

// Post-migraci√≥n: Basado en el mercado
await token.buy(amount, minOut);    // ‚ùå Se revierte
await swapService.executeSwap(...); // ‚úÖ Usar esto en su lugar
```

**Nuevas Responsabilidades:**
- **Construcci√≥n de Comunidad**: Impulsar el volumen de negociaci√≥n org√°nico
- **Incentivos de Liquidez**: Fomentar la participaci√≥n de LP  
- **Marketing**: Promover la utilidad y adopci√≥n del token
- **Integraci√≥n**: Listar en agregadores de DEX y plataformas

## Mejores Pr√°cticas para la Fase DEX

### Para Traders

<AccordionGroup>
  <Accordion title="Estrategias de Negociaci√≥n √ìptimas">
    **Gesti√≥n del Deslizamiento:**
    - Usar un deslizamiento del 0.5-2% para peque√±as operaciones
    - Deslizamiento mayor para cantidades grandes
    - Verificar el impacto en el precio antes de ejecutar
    
    **Consideraciones de Tiempo:**
    - Mayor liquidez durante horas activas
    - Monitorear movimientos grandes de LP
    - Usar √≥rdenes limitadas cuando est√©n disponibles
    
    **Ejemplo:**
    ```typescript
    const quote = await swapService.getSwapQuote({
      // ... par√°metros
      slippageTolerance: parseFloat(quote.priceImpact) > 5 ? 0.02 : 0.005
    });
    ```
  </Accordion>
  
  <Accordion title="Gesti√≥n de Riesgos">
    **An√°lisis de Liquidez:**
    - Verificar el TVL del pool antes de operaciones grandes
    - Monitorear la actividad del proveedor de liquidez
    - Entender la p√©rdida impermanente si es LP
    
    **Monitoreo de Precios:**
    - Configurar alertas de precios
    - Usar estrategias de stop-loss
    - Diversificar entre m√∫ltiples tokens
  </Accordion>
</AccordionGroup>

### Para Desarrolladores

<AccordionGroup>
  <Accordion title="Patrones de Integraci√≥n">
    **Verificaci√≥n de Estado:**
    ```typescript
    async function getOptimalTradingMethod(token: BondkitToken) {
      const status = await token.getStatus();
      
      if (status === TokenStatus.Bonding) {
        return {
          method: "bonding",
          interface: token
        };
      } else if (status === TokenStatus.Dex) {
        return {
          method: "dex", 
          interface: new BondkitSwapService(token.contractAddress)
        };
      }
    }
    ```
    
    **Manejo de Errores:**
    ```typescript
    try {
      // Siempre verificar la fase primero
      const tradingMethod = await getOptimalTradingMethod(token);
      
      if (tradingMethod.method === "dex") {
        await tradingMethod.interface.executeSwap(params, wallet);
      }
    } catch (error) {
      if (error.message.includes("TradingDisabledDexPhaseActive")) {
        // Cambiar a negociaci√≥n de DEX
        const swapService = new BondkitSwapService(tokenAddress);
        await swapService.executeSwap(params, wallet);
      }
    }
    ```
  </Accordion>
</AccordionGroup>

## Preguntas Comunes

<AccordionGroup>
  <Accordion title="¬øPueden los tokens volver a la fase de bonificaci√≥n?">
    **No** - La migraci√≥n es permanente e irreversible. Una vez en la fase DEX, el token siempre se negociar√° en Uniswap v4.
  </Accordion>
  
  <Accordion title="¬øQu√© pasa con la liquidez de la curva de bonificaci√≥n no utilizada?">
    Todos los tokens de negociaci√≥n acumulados de la fase de bonificaci√≥n se convierten en la liquidez inicial en el pool de Uniswap v4, emparejados con tokens de Bondkit calculados al precio de salida.
  </Accordion>
  
  <Accordion title="¬øHay alguna restricci√≥n en la fase DEX?">
    Sin restricciones - los tokens se convierten en ERC20s est√°ndar que negocian en Uniswap v4. Se habilita la composabilidad completa de DeFi.
  </Accordion>
  
  <Accordion title="¬øC√≥mo son diferentes las comisiones de negociaci√≥n?">
    La fase DEX utiliza comisiones est√°ndar de Uniswap v4 (0.3%) que van a los proveedores de liquidez en lugar de la comisi√≥n de la fase de bonificaci√≥n del 5% al receptor de comisiones.
  </Accordion>
</AccordionGroup>

## Pr√≥ximos Pasos

<CardGroup cols={2}>
  <Card title="Comenzar la Negociaci√≥n DEX" icon="arrow-right" href="/bondkit/sdk/reference#bondkitswapservice">
    Aprende a usar BondkitSwapService para la negociaci√≥n DEX
  </Card>
  <Card title="Agregar Gr√°ficos de Negociaci√≥n" icon="chart-line" href="/bondkit/sdk/reference#tradingview-component">  
    Integra gr√°ficos de TradingView para tus tokens DEX
  </Card>
  <Card title="Convertirse en LP" icon="coins" href="https://app.uniswap.org">
    Proporciona liquidez y gana comisiones de negociaci√≥n
  </Card>
  <Card title="Monitorear An√°lisis" icon="analytics" href="https://info.uniswap.org">
    Rastrea el rendimiento DEX de tu token  
  </Card>
</CardGroup>
