---
title: Integra√ß√£o Frontend
description: >-
  Configure o ParentProvider e use hooks para acessar a autentica√ß√£o do jogador,
  saldo e controles de UI no frontend do seu jogo.
lang: pt-BR
originalPath: upside/frontend-integration.mdx
---
## ParentProvider

O componente `ParentProvider` conecta a interface do seu jogo √† plataforma Upside e fornece autentica√ß√£o.

```javascript
import { ParentProvider, useParent, useBalance, useToken, useAuthenticatedFetch } from "@b3dotfun/upside-sdk";

export default function CoinFlipGame() {
  return (
    <ParentProvider>
      <GameContent />
    </ParentProvider>
  );
}

function GameContent() {
  const { token, balance, showWinModal, showLossModal, refetchBalance } = useParent();

  // Ou use hooks individuais:
  const balance = useBalance(); // number | null
  const token = useToken(); // string | null
  const authFetch = useAuthenticatedFetch(); // fetch com cabe√ßalho Authorization

  return (
    <div>
      <h1>Cara ou Coroa</h1>
      <p>Saldo: {(balance / 1e18).toFixed(2)} WIN</p>
      <button onClick={() => playGame(token)}>Jogar</button>
    </div>
  );
}
```

## Hooks Dispon√≠veis

### useParent()

Acessa o contexto completo (token, saldo, showWinModal, showLossModal, etc.)

**Valores de Retorno:**

- `token` (string | null): Token de autentica√ß√£o JWT para chamadas backend
- `balance` (number | null): Saldo atual do token WIN em wei
- `showWinModal(wins: string)`: Mostra o modal de vit√≥ria
- `showLossModal(loss: string)`: Mostra o modal de derrota
- `showToast(options)`: Mostra notifica√ß√£o toast
- `showCustomModal(content)`: Mostra modal personalizado
- `refetchBalance()`: Solicita a atualiza√ß√£o do saldo da plataforma

### useBalance()

Obt√©m o saldo do jogador (number | null)

```javascript
const balance = useBalance();
```

### useToken()

Obt√©m o token de autentica√ß√£o (string | null)

```javascript
const token = useToken();
```

### useRefetchBalance()

Fun√ß√£o para solicitar a atualiza√ß√£o do saldo

```javascript
const refetchBalance = useRefetchBalance();
```

### useCustomModal()

Fun√ß√£o para mostrar modais personalizados

```javascript
const showCustomModal = useCustomModal();
```

### useAuthenticatedFetch()

Fun√ß√£o fetch com cabe√ßalho de token Bearer autom√°tico

```javascript
const authFetch = useAuthenticatedFetch();
```

## Fazendo Chamadas API

Use o hook `useAuthenticatedFetch()` para fazer solicita√ß√µes autenticadas:

```javascript
import { useAuthenticatedFetch, useBalance, useToken } from "@b3dotfun/upside-sdk";

function GameComponent() {
  const authFetch = useAuthenticatedFetch();
  const balance = useBalance();
  const token = useToken();

  const playGame = async prediction => {
    // Cabe√ßalho Authorization √© automaticamente adicionado
    const response = await authFetch("/api/game/coin-flip", {
      method: "POST",
      body: JSON.stringify({
        playerId: "player-id",
        prediction,
        betAmount: "1000000000000000000", // 1 WIN em wei
      }),
    });

    const data = await response.json();
    return data;
  };

  return (
    <div>
      <p>Saldo: {(balance / 1e18).toFixed(2)} WIN</p>
      <button onClick={() => playGame("heads")}>Prever Cara</button>
    </div>
  );
}
```

**Como o useAuthenticatedFetch() Funciona:**

- Inclui automaticamente o cabe√ßalho `Authorization: Bearer {token}`
- Define `Content-Type: application/json` por padr√£o
- Mescla cabe√ßalhos adicionais que voc√™ fornecer
- Lida automaticamente com o token de `useToken()`

## Exemplo de Frontend

```javascript
import { ParentProvider, useParentContext } from "@b3dotfun/upside-sdk";

export default function CoinFlipGame() {
  return (
    <ParentProvider>
      <CoinFlipContent />
    </ParentProvider>
  );
}

function CoinFlipContent() {
  const { token, balance, playerId } = useParentContext();
  const [gameState, setGameState] = useState("ready"); // ready, playing, won, lost
  const [prediction, setPrediction] = useState(null);
  const [result, setResult] = useState(null);
  const [earnings, setEarnings] = useState(0);

  const playGame = async playerPrediction => {
    setPrediction(playerPrediction);
    setGameState("playing");

    try {
      // Chame seu backend
      const response = await fetch("/api/game/coin-flip", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          Authorization: `Bearer ${token}`,
        },
        body: JSON.stringify({
          playerId,
          prediction: playerPrediction,
          betAmount: "100000000000000000", // 1 token em wei
        }),
      });

      const data = await response.json();

      if (data.outcome === "win") {
        setGameState("won");
        setEarnings(data.payout);
      } else {
        setGameState("lost");
        setEarnings(0);
      }

      setResult(data.result);
    } catch (error) {
      console.error("Erro no jogo:", error);
      setGameState("error");
    }
  };

  return (
    <div style={{ textAlign: "center", padding: "40px" }}>
      <h1>Cara ou Coroa</h1>
      <p>Saldo: {(balance / 1e18).toFixed(2)} WIN</p>

      {gameState === "ready" && (
        <div>
          <button onClick={() => playGame("heads")}>Prever Cara</button>
          <button onClick={() => playGame("tails")}>Prever Coroa</button>
        </div>
      )}

      {gameState === "playing" && <p>Lan√ßando...</p>}

      {gameState === "won" && (
        <div>
          <p>üéâ Voc√™ ganhou! A moeda caiu em {result}</p>
          <p>+{(earnings / 1e18).toFixed(2)} WIN</p>
        </div>
      )}

      {gameState === "lost" && (
        <div>
          <p>‚ùå Voc√™ perdeu! A moeda caiu em {result}</p>
          <p>Melhor sorte na pr√≥xima vez</p>
        </div>
      )}

      {gameState !== "ready" && <button onClick={() => setGameState("ready")}>Jogar Novamente</button>}
    </div>
  );
}
```
