---
title: React Hooks
description: Refer√™ncia completa para hooks React de Contas Globais B3
lang: pt-BR
originalPath: sdk/global-account/hooks.mdx
---
## Ganchos de Autentica√ß√£o

### useB3

O gancho principal para acessar o estado de autentica√ß√£o da Conta Global e a√ß√µes.

```tsx
import { useB3 } from "@b3dotfun/sdk/global-account/react";

function AuthComponent() {
  const { 
    account,           // Conta global atual
    isAuthenticated,   // Status de autentica√ß√£o
    isLoading,         // Estado de carregamento
    signOut,           // Fun√ß√£o de sair
    refreshAccount     // Atualizar dados da conta
  } = useB3();

  return (
    <div>
      {isLoading && <p>Carregando...</p>}
      
      {isAuthenticated ? (
        <div>
          <h3>Bem-vindo(a), {account?.displayName}!</h3>
          <p>ID da Conta: {account?.id}</p>
          <p>Email: {account?.email}</p>
          <button onClick={signOut}>Sair</button>
        </div>
      ) : (
        <p>Por favor, fa√ßa login para continuar</p>
      )}
    </div>
  );
}
```

#### Valores de Retorno

| Propriedade | Tipo | Descri√ß√£o |
|----------|------|-------------|
| `account` | `GlobalAccount \| null` | Conta autenticada atual |
| `isAuthenticated` | `boolean` | Se o usu√°rio est√° autenticado |
| `isLoading` | `boolean` | Se a verifica√ß√£o de autentica√ß√£o est√° em andamento |
| `signOut` | `() => Promise<void>` | Fun√ß√£o para sair do usu√°rio atual |
| `refreshAccount` | `() => Promise<void>` | Fun√ß√£o para atualizar os dados da conta |

### useAccountWallet

Acessar informa√ß√µes da carteira para a conta autenticada.

```tsx
import { useAccountWallet } from "@b3dotfun/sdk/global-account/react";

function WalletComponent() {
  const { 
    wallet,       // Informa√ß√µes da carteira
    isConnected,  // Status de conex√£o
    connect,      // Fun√ß√£o de conectar carteira
    disconnect    // Fun√ß√£o de desconectar carteira
  } = useAccountWallet();

  return (
    <div>
      {isConnected ? (
        <div>
          <p>Endere√ßo: {wallet?.address}</p>
          <p>Chain: {wallet?.chainId}</p>
          <p>Saldo: {wallet?.balance} ETH</p>
          <button onClick={disconnect}>Desconectar</button>
        </div>
      ) : (
        <button onClick={connect}>Conectar Carteira</button>
      )}
    </div>
  );
}
```

## Ganchos de Permiss√£o

### usePermissions

Gerenciar e verificar permiss√µes de chave de sess√£o.

```tsx
import { usePermissions } from "@b3dotfun/sdk/global-account/react";

function PermissionsComponent() {
  const { 
    permissions,      // Permiss√µes atuais
    hasPermissions,   // Se o usu√°rio possui permiss√µes ativas
    isExpired,        // Se as permiss√µes est√£o expiradas
    checkPermission   // Verificar permiss√£o espec√≠fica
  } = usePermissions();

  const canInteractWithContract = checkPermission("0x...");

  return (
    <div>
      <h3>Status da Permiss√£o</h3>
      
      {hasPermissions ? (
        <div>
          <p>‚úÖ Permiss√µes Ativas</p>
          <p>Expira: {permissions?.endDate.toLocaleDateString()}</p>
          <p>Contratos: {permissions?.approvedTargets.length}</p>
          
          {isExpired && <p>‚ö†Ô∏è Permiss√µes expiradas</p>}
          
          <div>
            <p>Pode interagir com o contrato: {canInteractWithContract ? '‚úÖ' : '‚ùå'}</p>
          </div>
        </div>
      ) : (
        <p>Sem permiss√µes ativas</p>
      )}
    </div>
  );
}
```

### useRequestPermissions

Solicitar novas permiss√µes para chaves de sess√£o.

```tsx
import { useRequestPermissions } from "@b3dotfun/sdk/global-account/react";

function RequestPermissionsComponent() {
  const { 
    requestPermissions, 
    isLoading, 
    error,
    reset 
  } = useRequestPermissions();

  const handleRequest = async () => {
    try {
      const result = await requestPermissions({
        chain: { id: 8333, name: "B3" },
        sessionKeyAddress: "0x...",
        permissions: {
          approvedTargets: ["0x..."],
          startDate: new Date(),
          endDate: new Date(Date.now() + 24 * 60 * 60 * 1000),
          nativeTokenLimitPerTransaction: 0.01,
        },
      });

      if (result.success) {
        console.log("Permiss√µes concedidas!");
      }
    } catch (err) {
      console.error("Falha na solicita√ß√£o de permiss√£o:", err);
    }
  };

  return (
    <div>
      <button 
        onClick={handleRequest}
        disabled={isLoading}
      >
        {isLoading ? "Solicitando..." : "Solicitar Permiss√µes"}
      </button>
      
      {error && (
        <div className="error">
          Erro: {error.message}
          <button onClick={reset}>Tentar Novamente</button>
        </div>
      )}
    </div>
  );
}
```

### useRevokePermissions

Revogar permiss√µes existentes.

```tsx
import { useRevokePermissions } from "@b3dotfun/sdk/global-account/react";

function RevokePermissionsComponent() {
  const { revokePermissions, isLoading, error } = useRevokePermissions();

  const handleRevoke = async () => {
    try {
      await revokePermissions({
        sessionKeyAddress: "0x...",
        chain: { id: 8333, name: "B3" },
      });
      console.log("Permiss√µes revogadas com sucesso");
    } catch (err) {
      console.error("Falha ao revogar permiss√µes:", err);
    }
  };

  return (
    <button 
      onClick={handleRevoke}
      disabled={isLoading}
    >
      {isLoading ? "Revogando..." : "Revogar Permiss√µes"}
    </button>
  );
}
```

## Ganchos de Gerenciamento de Ativos

### useAccountAssets

Recuperar e gerenciar os ativos digitais do usu√°rio.

```tsx
import { useAccountAssets } from "@b3dotfun/sdk/global-account/react";

function AssetsComponent() {
  const { 
    assets,        // Ativos do usu√°rio
    isLoading,     // Estado de carregamento
    error,         // Estado de erro
    refreshAssets  // Fun√ß√£o de atualizar ativos
  } = useAccountAssets();

  if (isLoading) return <div>Carregando ativos...</div>;
  if (error) return <div>Erro ao carregar ativos: {error.message}</div>;

  return (
    <div>
      <h3>Seus Ativos</h3>
      <button onClick={refreshAssets}>Atualizar</button>
      
      {assets?.map((asset) => (
        <div key={asset.id} className="asset-item">
          <img src={asset.imageUrl} alt={asset.name} />
          <h4>{asset.name}</h4>
          <p>{asset.description}</p>
          <p>Valor: {asset.value} {asset.currency}</p>
        </div>
      ))}
    </div>
  );
}
```

## Ganchos de Gerenciamento de Modais

### useModal

Controlar modais B3 programaticamente.

```tsx
import { useModal } from "@b3dotfun/sdk/global-account/react";

function ModalControlComponent() {
  const { 
    openModal, 
    closeModal, 
    isModalOpen,
    currentModal 
  } = useModal();

  const handleOpenAuth = () => {
    openModal('authentication', {
      provider: { strategy: 'google' },
      partnerId: 'your-partner-id'
    });
  };

  const handleOpenPermissions = () => {
    openModal('permissions', {
      sessionKeyAddress: '0x...',
      permissions: {
        approvedTargets: ['0x...'],
        nativeTokenLimitPerTransaction: 0.01
      }
    });
  };

  return (
    <div>
      <p>Modal atual: {currentModal || 'Nenhum'}</p>
      <p>Modal aberto: {isModalOpen ? 'Sim' : 'N√£o'}</p>
      
      <button onClick={handleOpenAuth}>Abrir Modal de Autentica√ß√£o</button>
      <button onClick={handleOpenPermissions}>Abrir Modal de Permiss√µes</button>
      <button onClick={closeModal}>Fechar Modal</button>
    </div>
  );
}
```

## Ganchos de Navega√ß√£o

### useNavigation

Manusear a navega√ß√£o dentro das aplica√ß√µes B3.

```tsx
import { useNavigation } from "@b3dotfun/sdk/global-account/react";

function NavigationComponent() {
  const { 
    navigate, 
    canGoBack, 
    goBack,
    currentPath 
  } = useNavigation();

  return (
    <div>
      <p>Caminho atual: {currentPath}</p>
      
      <button onClick={() => navigate('/dashboard')}>
        Ir para Dashboard
      </button>
      
      <button onClick={() => navigate('/profile')}>
        Ir para Perfil
      </button>
      
      {canGoBack && (
        <button onClick={goBack}>
          Voltar
        </button>
      )}
    </div>
  );
}
```

## Ganchos de Configura√ß√£o

### useB3Config

Acessar configura√ß√£o e defini√ß√µes de ambiente B3.

```tsx
import { useB3Config } from "@b3dotfun/sdk/global-account/react";

function ConfigComponent() {
  const { 
    environment,     // 'production' | 'development'
    apiUrl,          // URL da API atual
    partnerId,       // Seu ID de parceiro
    features,        // Recursos dispon√≠veis
    updateConfig     // Atualizar configura√ß√£o
  } = useB3();

  return (
    <div>
      <h3>Configura√ß√£o B3</h3>
      <p>Ambiente: {environment}</p>
      <p>URL da API: {apiUrl}</p>
      <p>ID do Parceiro: {partnerId}</p>
      
      <h4>Recursos Dispon√≠veis:</h4>
      <ul>
        {features.map(feature => (
          <li key={feature}>{feature}</li>
        ))}
      </ul>
    </div>
  );
}
```

## Composi√ß√£o de Ganchos

### Exemplo de Gancho Personalizado

Combinar m√∫ltiplos ganchos para funcionalidades complexas:

```tsx
import { useB3, usePermissions, useAccountWallet } from "@b3dotfun/sdk/global-account/react";

function useGameAuth() {
  const { account, isAuthenticated } = useB3();
  const { hasPermissions, isExpired } = usePermissions();
  const { wallet, isConnected } = useAccountWallet();

  const isGameReady = isAuthenticated && hasPermissions && !isExpired && isConnected;
  
  const gameAuthStatus = {
    account: !!account,
    permissions: hasPermissions && !isExpired,
    wallet: isConnected,
    ready: isGameReady
  };

  return {
    account,
    wallet,
    isGameReady,
    gameAuthStatus
  };
}

// Uso
function GameComponent() {
  const { isGameReady, gameAuthStatus } = useGameAuth();

  if (!isGameReady) {
    return (
      <div>
        <h3>Configura√ß√£o Necess√°ria</h3>
        <ul>
          <li>Conta: {gameAuthStatus.account ? '‚úÖ' : '‚ùå'}</li>
          <li>Permiss√µes: {gameAuthStatus.permissions ? '‚úÖ' : '‚ùå'}</li>
          <li>Carteira: {gameAuthStatus.wallet ? '‚úÖ' : '‚ùå'}</li>
        </ul>
      </div>
    );
  }

  return <div>üéÆ Jogo Pronto!</div>;
}
```

## Suporte a TypeScript

Todos os ganchos incluem suporte completo a TypeScript:

```typescript
import type { 
  GlobalAccount, 
  Permissions, 
  WalletInfo 
} from "@b3dotfun/sdk/global-account/types";

// Os tipos de retorno dos ganchos s√£o totalmente tipados
const { account }: { account: GlobalAccount | null } = useB3();
const { permissions }: { permissions: Permissions | null } = usePermissions();
const { wallet }: { wallet: WalletInfo | null } = useAccountWallet();
```

## Tratamento de Erros

Melhores pr√°ticas para o tratamento de erros com ganchos:

```tsx
function ErrorHandlingExample() {
  const { account, isAuthenticated } = useB3();
  const { requestPermissions, error: permissionError } = useRequestPermissions();
  const { assets, error: assetError } = useAccountAssets();

  // Tratar erros espec√≠ficos
  useEffect(() => {
    if (permissionError) {
      console.error('Erro de permiss√£o:', permissionError);
      // Mostrar mensagem de erro amig√°vel ao usu√°rio
    }
    
    if (assetError) {
      console.error('Erro ao carregar ativos:', assetError);
      // Tentar novamente ou mostrar UI de fallback
    }
  }, [permissionError, assetError]);

  return (
    <div>
      {/* Seu JSX de componente */}
    </div>
  );
}
```

## Pr√≥ximos Passos

<CardGroup cols={2}>

<Card title="Exemplos" icon="code" href="/sdk/global-account/examples">
  Veja exemplos completos usando esses ganchos.
</Card>

</CardGroup>
