---
title: Fase DEX
description: >-
  Negocia√ß√£o na Uniswap v4 ap√≥s a migra√ß√£o: trocas, liquidez e negocia√ß√£o
  descentralizada.
lang: pt-BR
originalPath: bondkit/concepts/dex-phase.mdx
---
## O que √© a Fase DEX?

A fase DEX √© a etapa final do ciclo de vida de um token Bondkit, onde a negocia√ß√£o transita da curva de bonding automatizada para um pool totalmente descentralizado no Uniswap v4. Esta fase come√ßa imediatamente ap√≥s a migra√ß√£o e representa a descentraliza√ß√£o completa.

```mermaid
stateDiagram-v2
    [*] --> BondingPhase: Token Criado
    BondingPhase --> MigrationReady: Meta Atingida
    MigrationReady --> DEXPhase: migrateToDex()
    DEXPhase --> [*]: Totalmente Descentralizado
    
    note right of BondingPhase
        Precifica√ß√£o controlada por contrato
        5% de taxas de negocia√ß√£o
        Compra/venda direta apenas
        Acumula√ß√£o de meta
    end note
    
    note right of DEXPhase
        Precifica√ß√£o dirigida pelo mercado
        Taxas padr√£o DEX
        Recursos completos de negocia√ß√£o
        Sem controle administrativo
    end note
```

## Como Funciona a Migra√ß√£o

### O Processo de Transi√ß√£o

Quando `migrateToDex()` √© chamado ap√≥s atingir a meta:

1. **Status do Contrato**: Status do token muda para `TokenStatus.Dex`
2. **Pool Uniswap v4**: Novo pool criado com liquidez acumulada
3. **Inicializa√ß√£o do Pre√ßo**: Pre√ßo inicial do pool calculado a partir do pre√ßo de sa√≠da da curva de bonding
4. **Ren√∫ncia de Propriedade**: Propriedade do contrato transferida para o endere√ßo zero
5. **Negocia√ß√£o Habilitada**: Negocia√ß√£o completa DEX come√ßa imediatamente

### Configura√ß√£o do Pool

**Configura√ß√£o Autom√°tica do Pool:**
```typescript
// Pool √© criado com estes par√¢metros (da migra√ß√£o)
const poolConfig = {
  currency0: tradingToken < bondkitToken ? tradingToken : bondkitToken,
  currency1: tradingToken < bondkitToken ? bondkitToken : tradingToken,
  fee: 3000,        // Taxa padr√£o de 0.3%
  tickSpacing: 60,  // Espa√ßamento padr√£o de ticks
  hooks: customHook // Hooks espec√≠ficos do Bondkit
};
```

**Liquidez Inicial:**
- **Token de Negocia√ß√£o**: Todos os fundos acumulados da fase de bonding
- **Tokens Bondkit**: Quantidade calculada para corresponder ao pre√ßo de sa√≠da
- **Tokens LP**: Divididos entre o destinat√°rio da taxa e queimados/distribu√≠dos

## Negocia√ß√£o na Fase DEX

### Op√ß√µes de Negocia√ß√£o

**Negocia√ß√£o DEX Padr√£o:**
Tokens Bondkit na fase DEX podem ser negociados usando qualquer interface compat√≠vel com Uniswap v4, agregador DEX ou plataforma de negocia√ß√£o.

**SDK Helper (Opcional):**
O SDK fornece `BondkitSwapService` para integra√ß√£o simplificada, se necess√°rio.

### Descoberta de Pre√ßo & Liquidez

**Precifica√ß√£o Dirigida pelo Mercado:**
- Sem mais curva de bonding algor√≠tmica
- Pre√ßo determinado por oferta/demanda
- Din√¢mica de livro de ordens em tempo real
- Sujeito a volatilidade do mercado

**Fontes de Liquidez:**
```typescript
// Liquidez inicial da migra√ß√£o
const migrationData = {
  tradingTokenLiquidity: "10.0",    // ETH/B3 da bonding
  bondkitTokenLiquidity: "500000",  // Quantidade de token calculada
  initialPrice: "0.00002",          // Pre√ßo por token
  totalValueLocked: "20.0"          // TVL combinado
};

// Liquidez adicional de:
// - LPs da comunidade
// - Programas de incentivo  
// - Acumula√ß√£o de taxas de negocia√ß√£o
```

## Principais Diferen√ßas da Fase de Bonding

### Mec√¢nicas de Negocia√ß√£o

| Aspecto | Fase de Bonding | Fase DEX |
|--------|--------------|-----------|
| **Precifica√ß√£o** | Curva algor√≠tmica | Oferta/demanda do mercado |
| **Liquidez** | Ilimitada (contrato emite) | Liquidez limitada do pool |
| **Taxas** | 5% para o destinat√°rio da taxa | 0.3% para LPs + protocolo |
| **Tipos de Ordem** | Compra/venda apenas | Recursos completos DEX |
| **Impacto no Pre√ßo** | Curva previs√≠vel | Depende da profundidade da liquidez |
| **MEV** | N√£o aplic√°vel | Sujeito a MEV |

### Mudan√ßas no Contrato Inteligente

**Transi√ß√£o de Status:**
```typescript
// Verificar fase atual
const status = await token.getStatus();

if (status === TokenStatus.Dex) {
  // Usar m√©todos de negocia√ß√£o DEX
  const swapService = new BondkitSwapService(tokenAddress);
  // ... c√≥digo de negocia√ß√£o DEX
} else if (status === TokenStatus.Bonding) {
  // Usar m√©todos da curva de bonding
  await token.buy(amount, minTokensOut);
}
```

**Disponibilidade de M√©todo:**
- ‚úÖ `token.buy()` / `token.sell()` - **Desabilitado** (vai reverter)
- ‚úÖ Negocia√ß√£o DEX via `BondkitSwapService`
- ‚úÖ Funcionalidade ERC20 padr√£o continua
- ‚úÖ Monitoramento de eventos para negocia√ß√µes DEX

## Recursos Avan√ßados DEX

### Integra√ß√£o de Hooks Personalizados

Tokens Bondkit no Uniswap v4 incluem hooks personalizados para funcionalidades aprimoradas:

```typescript
// Recursos do hook (aplicados automaticamente)
const hookFeatures = {
  beforeSwap: "C√°lculos de taxa personalizados",
  afterSwap: "Rastreamento de an√°lises", 
  beforeAddLiquidity: "Recompensas LP",
  afterRemoveLiquidity: "Manuseio de taxa de sa√≠da"
};
```

### An√°lises & Monitoramento

**Dados em Tempo Real:**
```typescript
import TradingView from "@b3dotfun/sdk/bondkit/components/TradingView";

// Gr√°ficos profissionais com dados DEX
function DEXTradingInterface({ tokenAddress, tokenSymbol }) {
  return (
    <div className="space-y-6">
      {/* Gr√°fico de pre√ßo com dados DEX */}
      <TradingView 
        tokenAddress={tokenAddress}
        tokenSymbol={tokenSymbol}
        className="h-96 w-full"
      />
      
      {/* Interface de negocia√ß√£o */}
      <SwapInterface tokenAddress={tokenAddress} />
    </div>
  );
}
```

**M√©tricas Dispon√≠veis:**
- Feeds de pre√ßo em tempo real
- Volume e mudan√ßa de 24h  
- Profundidade de liquidez
- Dados hist√≥ricos OHLCV
- Hist√≥rico de transa√ß√µes
- An√°lises de detentores

### Provis√£o de Liquidez

**Tornando-se um LP:**
```typescript
// Adicionar liquidez ao pool de token Bondkit
import { Pool, Position } from "@uniswap/v3-sdk";

const position = new Position({
  pool: bondkitPool,
  liquidity: targetLiquidity,
  tickLower: lowerTick,
  tickUpper: upperTick
});

// Ganhar taxas de negocia√ß√£o + incentivos potenciais
```

**Benef√≠cios LP:**
- **Taxas de Negocia√ß√£o**: Ganhar 0.3% de todo o volume de swap
- **Programas de Incentivo**: Recompensas adicionais potenciais
- **Valoriza√ß√£o do Pre√ßo**: Beneficiar-se do crescimento do token
- **Perda Impermanente**: Riscos padr√£o AMM aplicam-se

## An√°lise de Impacto da Migra√ß√£o

### Para Detentores de Token

**Efeitos Imediatos:**
- ‚úÖ Tokens permanecem totalmente transfer√≠veis
- ‚úÖ Podem negociar no mercado aberto
- ‚úÖ Sem per√≠odos de bloqueio
- ‚ö†Ô∏è Pre√ßo agora sujeito a volatilidade do mercado
- ‚ö†Ô∏è Sem liquidez garantida (depende da profundidade do pool)

**Benef√≠cios a Longo Prazo:**
- üöÄ Acesso a um ecossistema de negocia√ß√£o maior
- üöÄ Integra√ß√£o com protocolos DeFi
- üöÄ Composabilidade com outros tokens
- üöÄ Verdadeira descentraliza√ß√£o alcan√ßada

### Para Projetos

**Mudan√ßas Operacionais:**
```typescript
// Pr√©-migra√ß√£o: Controle direto
await token.buy(amount, minOut);    // ‚úÖ Funciona
await token.migrateToDex();         // A√ß√£o √∫nica

// P√≥s-migra√ß√£o: Baseado no mercado
await token.buy(amount, minOut);    // ‚ùå Reverte
await swapService.executeSwap(...); // ‚úÖ Use isso em vez disso
```

**Novas Responsabilidades:**
- **Constru√ß√£o de Comunidade**: Impulsionar volume de negocia√ß√£o org√¢nico
- **Incentivos de Liquidez**: Encorajar participa√ß√£o LP  
- **Marketing**: Promover utilidade e ado√ß√£o do token
- **Integra√ß√£o**: Listar em agregadores e plataformas DEX

## Melhores Pr√°ticas para a Fase DEX

### Para Traders

<AccordionGroup>
  <Accordion title="Estrat√©gias de Negocia√ß√£o √ìtimas">
    **Gerenciamento de Slippage:**
    - Use slippage de 0.5-2% para pequenas negocia√ß√µes
    - Slippage maior para quantidades maiores
    - Verifique o impacto no pre√ßo antes da execu√ß√£o
    
    **Considera√ß√µes de Tempo:**
    - Maior liquidez durante hor√°rios ativos
    - Monitorar grandes movimentos de LP
    - Usar ordens limitadas quando dispon√≠vel
    
    **Exemplo:**
    ```typescript
    const quote = await swapService.getSwapQuote({
      // ... par√¢metros
      slippageTolerance: parseFloat(quote.priceImpact) > 5 ? 0.02 : 0.005
    });
    ```
  </Accordion>
  
  <Accordion title="Gerenciamento de Risco">
    **An√°lise de Liquidez:**
    - Verificar TVL do pool antes de grandes negocia√ß√µes
    - Monitorar atividade do provedor de liquidez
    - Entender perda impermanente se LP
    
    **Monitoramento de Pre√ßo:**
    - Configurar alertas de pre√ßo
    - Usar estrat√©gias de stop-loss
    - Diversificar entre v√°rios tokens
  </Accordion>
</AccordionGroup>

### Para Desenvolvedores

<AccordionGroup>
  <Accordion title="Padr√µes de Integra√ß√£o">
    **Verifica√ß√£o de Status:**
    ```typescript
    async function getOptimalTradingMethod(token: BondkitToken) {
      const status = await token.getStatus();
      
      if (status === TokenStatus.Bonding) {
        return {
          method: "bonding",
          interface: token
        };
      } else if (status === TokenStatus.Dex) {
        return {
          method: "dex", 
          interface: new BondkitSwapService(token.contractAddress)
        };
      }
    }
    ```
    
    **Tratamento de Erros:**
    ```typescript
    try {
      // Sempre verificar a fase primeiro
      const tradingMethod = await getOptimalTradingMethod(token);
      
      if (tradingMethod.method === "dex") {
        await tradingMethod.interface.executeSwap(params, wallet);
      }
    } catch (error) {
      if (error.message.includes("TradingDisabledDexPhaseActive")) {
        // Mudar para negocia√ß√£o DEX
        const swapService = new BondkitSwapService(tokenAddress);
        await swapService.executeSwap(params, wallet);
      }
    }
    ```
  </Accordion>
</AccordionGroup>

## Perguntas Comuns

<AccordionGroup>
  <Accordion title="Os tokens podem voltar para a fase de bonding?">
    **N√£o** - A migra√ß√£o √© permanente e irrevers√≠vel. Uma vez na fase DEX, o token sempre negociar√° no Uniswap v4.
  </Accordion>
  
  <Accordion title="O que acontece com a liquidez n√£o utilizada da curva de bonding?">
    Todos os tokens de negocia√ß√£o acumulados da fase de bonding tornam-se a liquidez inicial no pool Uniswap v4, emparelhados com tokens bondkit calculados ao pre√ßo de sa√≠da.
  </Accordion>
  
  <Accordion title="Existem restri√ß√µes na fase DEX?">
    Sem restri√ß√µes - os tokens tornam-se ERC20s padr√£o negociando no Uniswap v4. A composabilidade completa DeFi √© habilitada.
  </Accordion>
  
  <Accordion title="Como as taxas de negocia√ß√£o s√£o diferentes?">
    A fase DEX utiliza taxas padr√£o do Uniswap v4 (0.3%) que v√£o para os provedores de liquidez em vez da taxa de 5% da fase de bonding para o destinat√°rio da taxa.
  </Accordion>
</AccordionGroup>

## Pr√≥ximos Passos

<CardGroup cols={2}>
  <Card title="Come√ßar a Negocia√ß√£o DEX" icon="arrow-right" href="/bondkit/sdk/reference#bondkitswapservice">
    Aprenda a usar BondkitSwapService para negocia√ß√£o DEX
  </Card>
  <Card title="Adicionar Gr√°ficos de Negocia√ß√£o" icon="chart-line" href="/bondkit/sdk/reference#tradingview-component">  
    Integre gr√°ficos TradingView para seus tokens DEX
  </Card>
  <Card title="Tornar-se um LP" icon="coins" href="https://app.uniswap.org">
    Forne√ßa liquidez e ganhe taxas de negocia√ß√£o
  </Card>
  <Card title="Monitorar An√°lises" icon="analytics" href="https://info.uniswap.org">
    Acompanhe o desempenho DEX do seu token  
  </Card>
</CardGroup>
