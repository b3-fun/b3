---
title: Eventos
description: Rastreamento de API e registro de eventos
lang: pt-BR
originalPath: anyspend/api/events.mdx
---
O endpoint de eventos fornece um registro de auditoria de todas as ações de API realizadas em sua conta. Todas as operações de criação, atualização e exclusão são registradas com metadados, incluindo o método de solicitação, caminho, endereço IP e código de status.

<Info>
  O endpoint de eventos requer permissão de **leitura**.
</Info>

## Autenticação

```bash
Authorization: Bearer asp_xxx
```

URL Base: `https://platform-api.anyspend.com/api/v1`

## Endpoints

### Listar Eventos

<ParamField path="GET /events" type="read">
  Lista eventos da API com filtragem opcional. Os resultados são retornados em ordem cronológica reversa (os mais novos primeiro).
</ParamField>

<ParamField path="type" type="string" query>
  Filtrar por tipo de evento (por exemplo, `payment_link.created`, `webhook.updated`, `discount_code.deleted`).
</ParamField>

<ParamField path="resource_type" type="string" query>
  Filtrar por tipo de recurso (por exemplo, `payment_link`, `webhook`, `discount_code`, `widget`, `notification`).
</ParamField>

<ParamField path="from" type="string" query>
  Timestamp ISO 8601. Retorna apenas eventos criados em ou após este tempo.
</ParamField>

<ParamField path="to" type="string" query>
  Timestamp ISO 8601. Retorna apenas eventos criados em ou antes deste tempo.
</ParamField>

<ParamField path="page" type="number" query>
  Número da página para paginação (padrão: `1`).
</ParamField>

<ParamField path="limit" type="number" query>
  Resultados por página (padrão: `20`, máximo: `100`).
</ParamField>

<Tabs>
  <Tab title="cURL">
    ```bash
    curl -X GET "https://platform-api.anyspend.com/api/v1/events?type=payment_link.created&from=2026-02-01T00:00:00Z&limit=10" \
      -H "Authorization: Bearer asp_xxx"
    ```
  </Tab>
  <Tab title="SDK">
    ```typescript
    import { AnySpendClient } from "@b3dotfun/sdk/anyspend";

    const client = new AnySpendClient({ apiKey: process.env.ANYSPEND_API_KEY! });
    const events = await client.events.list({
      type: "payment_link.created",
      from: "2026-02-01T00:00:00Z",
      limit: 10,
    });
    ```
  </Tab>
</Tabs>

**Resposta**

```json
{
  "success": true,
  "data": [
    {
      "id": "evt_abc123",
      "event_type": "payment_link.created",
      "resource_type": "payment_link",
      "resource_id": "pl_xyz789",
      "ip_address": "203.0.113.42",
      "request_method": "POST",
      "request_path": "/api/v1/payment-links",
      "status_code": 201,
      "created_at": "2026-02-27T10:30:00Z"
    },
    {
      "id": "evt_abc124",
      "event_type": "payment_link.created",
      "resource_type": "payment_link",
      "resource_id": "pl_xyz790",
      "ip_address": "203.0.113.42",
      "request_method": "POST",
      "request_path": "/api/v1/payment-links",
      "status_code": 201,
      "created_at": "2026-02-25T14:15:00Z"
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 10,
    "total": 2,
    "total_pages": 1
  }
}
```

---

## Objeto do Evento

| Campo | Tipo | Descrição |
|-------|------|-------------|
| `id` | `string` | Identificador único do evento (por exemplo, `evt_abc123`) |
| `event_type` | `string` | O tipo de ação que ocorreu (veja [Tipos de Eventos](#event-types)) |
| `resource_type` | `string` | O tipo de recurso afetado |
| `resource_id` | `string` | O ID do recurso afetado |
| `ip_address` | `string` | Endereço IP do chamador da API |
| `request_method` | `string` | Método HTTP utilizado (`GET`, `POST`, `PATCH`, `DELETE`) |
| `request_path` | `string` | Caminho da API que foi chamado |
| `status_code` | `number` | Código de status HTTP retornado |
| `created_at` | `string` | Timestamp ISO 8601 quando o evento foi registrado |

## Tipos de Eventos

Os eventos seguem o padrão `{resource_type}.{action}`:

| Tipo de Evento | Descrição |
|------------|-------------|
| `payment_link.created` | Um link de pagamento foi criado |
| `payment_link.updated` | Um link de pagamento foi atualizado |
| `payment_link.deleted` | Um link de pagamento foi excluído |
| `product.created` | Um produto foi criado |
| `product.updated` | Um produto foi atualizado |
| `product.deleted` | Um produto foi excluído |
| `webhook.created` | Um endpoint de webhook foi criado |
| `webhook.updated` | Um endpoint de webhook foi atualizado |
| `webhook.deleted` | Um endpoint de webhook foi excluído |
| `discount_code.created` | Um código de desconto foi criado |
| `discount_code.updated` | Um código de desconto foi atualizado |
| `discount_code.deleted` | Um código de desconto foi excluído |
| `widget.created` | Um widget foi criado |
| `widget.updated` | Um widget foi atualizado |
| `widget.deleted` | Um widget foi excluído |
| `notification.updated` | As configurações de notificação foram atualizadas |
| `api_key.created` | Uma chave API foi criada |
| `api_key.revoked` | Uma chave API foi revogada |

## Tipos de Recursos

| Tipo de Recurso | Descrição |
|---------------|-------------|
| `payment_link` | Recursos de link de pagamento |
| `product` | Entradas do catálogo de produtos |
| `webhook` | Configurações de endpoints de webhook |
| `discount_code` | Entradas de códigos de desconto |
| `widget` | Configurações de widgets |
| `notification` | Configurações de notificação |
| `api_key` | Gerenciamento de chaves API |

---

## Exemplos de Filtragem

### Eventos para um intervalo de datas específico

<Tabs>
  <Tab title="cURL">
    ```bash
    curl -X GET "https://platform-api.anyspend.com/api/v1/events?from=2026-02-01T00:00:00Z&to=2026-02-28T23:59:59Z" \
      -H "Authorization: Bearer asp_xxx"
    ```
  </Tab>
  <Tab title="SDK">
    ```typescript
    const events = await client.events.list({
      from: "2026-02-01T00:00:00Z",
      to: "2026-02-28T23:59:59Z",
    });
    ```
  </Tab>
</Tabs>

### Todos os eventos relacionados a webhook

<Tabs>
  <Tab title="cURL">
    ```bash
    curl -X GET "https://platform-api.anyspend.com/api/v1/events?resource_type=webhook&limit=50" \
      -H "Authorization: Bearer asp_xxx"
    ```
  </Tab>
  <Tab title="SDK">
    ```typescript
    const events = await client.events.list({
      resource_type: "webhook",
      limit: 50,
    });
    ```
  </Tab>
</Tabs>

### Auditoria de exclusão

<Tabs>
  <Tab title="cURL">
    ```bash
    curl -X GET "https://platform-api.anyspend.com/api/v1/events?type=payment_link.deleted" \
      -H "Authorization: Bearer asp_xxx"
    ```
  </Tab>
  <Tab title="SDK">
    ```typescript
    const deletions = await client.events.list({
      type: "payment_link.deleted",
    });

    deletions.data.forEach((event) => {
      console.log(
        `${event.resource_id} excluído de ${event.ip_address} em ${event.created_at}`
      );
    });
    ```
  </Tab>
</Tabs>

<Note>
  Os eventos são retidos por 90 dias. Para retenção mais longa, exporte eventos periodicamente usando os filtros de intervalo de datas.
</Note>
